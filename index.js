var z=(H)=>typeof H==="function",r=(H,K)=>Object.prototype.toString.call(H)===`[object ${K}]`,v=(H)=>H instanceof Error?H:Error(String(H));class d extends Error{constructor(H){super(`Circular dependency in ${H} detected`);return this}}var k,a=new Set,YH=0,xH=new Map,t,UH=()=>{t=void 0;let H=Array.from(xH.values());xH.clear();for(let K of H)K()},RH=()=>{if(t)cancelAnimationFrame(t);t=requestAnimationFrame(UH)};queueMicrotask(UH);var u=(H)=>{let K=new Set,$=H;return $.off=(B)=>{K.add(B)},$.cleanup=()=>{for(let B of K)B();K.clear()},$},R=(H)=>{if(k&&!H.has(k)){let K=k;H.add(K),k.off(()=>{H.delete(K)})}},_=(H)=>{for(let K of H)if(YH)a.add(K);else K()},e=()=>{while(a.size){let H=Array.from(a);a.clear();for(let K of H)K()}},HH=(H)=>{YH++;try{H()}finally{e(),YH--}},c=(H,K)=>{let $=k;k=K;try{H()}finally{k=$}},E=(H,K)=>new Promise(($,B)=>{xH.set(K||Symbol(),()=>{try{$(H())}catch(Z){B(Z)}}),RH()});var GH="State",KH=(H)=>{let K=new Set,$=H,B={[Symbol.toStringTag]:GH,get:()=>{return R(K),$},set:(Z)=>{if(Object.is($,Z))return;if($=Z,_(K),V===$)K.clear()},update:(Z)=>{B.set(Z($))}};return B},M=(H)=>r(H,GH);var b="Computed",$H=(H)=>{let K=new Set,$=V,B,Z,J=!0,A=!1,L=!1,Q=(G)=>{if(!Object.is(G,$))$=G,A=!0;B=void 0,J=!1},W=()=>{A=V!==$,$=V,B=void 0},X=(G)=>{let y=v(G);A=!B||y.name!==B.name||y.message!==B.message,$=V,B=y},x=(G)=>(y)=>{if(L=!1,Z=void 0,G(y),A)_(K)},j=u(()=>{if(J=!0,Z?.abort("Aborted because source signal changed"),K.size)_(K);else j.cleanup()}),C=()=>c(()=>{if(L)throw new d("computed");if(A=!1,z(H)&&H.constructor.name==="AsyncFunction"){if(Z)return $;Z=new AbortController,Z.signal.addEventListener("abort",()=>{L=!1,Z=void 0,C()},{once:!0})}let G;L=!0;try{G=Z?H(Z.signal):H()}catch(y){if(y instanceof DOMException&&y.name==="AbortError")W();else X(y);L=!1;return}if(G instanceof Promise)G.then(x(Q),x(X));else if(G==null||V===G)W();else Q(G);L=!1},j);return{[Symbol.toStringTag]:b,get:()=>{if(R(K),e(),J)C();if(B)throw B;return $}}},g=(H)=>r(H,b),yH=(H)=>z(H)&&H.length<2;var V=Symbol(),D=(H)=>M(H)||g(H),T=(H)=>D(H)?H:yH(H)?$H(H):KH(H);function f(H){let{signals:K,ok:$,err:B=console.error,nil:Z=()=>{}}=z(H)?{signals:[],ok:H}:H,J=!1,A=u(()=>c(()=>{if(J)throw new d("effect");J=!0;let L=[],Q=!1,W=K.map((x)=>{try{let j=x.get();if(j===V)Q=!0;return j}catch(j){return L.push(v(j)),V}}),X=void 0;try{X=Q?Z():L.length?B(...L):$(...W)}catch(x){X=B(v(x))}finally{if(z(X))A.off(X)}J=!1},A));return A(),()=>A.cleanup()}var q=!1,FH="debug",DH="info",BH="warn",w="error",TH=(H)=>H?`#${H}`:"",wH=(H)=>H?.length?`.${Array.from(H).join(".")}`:"",i=(H)=>!!H&&typeof H==="object",O=(H)=>typeof H==="string",PH=(H,K)=>O(K)&&(K in H)&&z(H[K]),CH=(H)=>H.nodeType===Node.ELEMENT_NODE,o=(H)=>H.localName.includes("-");var Y=(H)=>H?`<${H.localName}${TH(H.id)}${wH(H.classList)}>`:"<unknown>",p=(H)=>O(H)?`"${H}"`:i(H)?JSON.stringify(H):String(H),ZH=(H)=>{if(H===null)return"null";if(typeof H!=="object")return typeof H;if(Array.isArray(H))return"Array";if(Symbol.toStringTag in Object(H))return H[Symbol.toStringTag];return H.constructor?.name||"Object"},I=(H,K,$=FH)=>{if(q||[w,BH].includes($))console[$](K,H);return H};class JH extends Error{constructor(H,K){super(`Circular dependency detected in selection signal for component ${Y(H)} with selector "${K}"`);this.name="CircularMutationError"}}class LH extends Error{constructor(H){super(`Invalid component name "${H}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class n extends Error{constructor(H,K,$){super(`Invalid property name "${K}" for component <${H}>. ${$}`);this.name="InvalidPropertyNameError"}}class WH extends Error{constructor(H,K){super(`Invalid effects in component <${Y(H)}>. Effects must be an array of effects, a single effect function, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",K)this.cause=K}}class AH extends Error{constructor(H,K){super(`Expected signal as value for property "${String(K)}" in component ${Y(H)}.`);this.name="InvalidSignalError"}}class s extends Error{constructor(H,K,$){super(`Missing required element <${K}> in component ${Y(H)}. ${$}`);this.name="MissingElementError"}}class QH extends Error{constructor(H,K){super(`Timeout waiting for: [${K.join(", ")}] in component ${Y(H)}.`);this.name="DependencyTimeoutError"}}var N=Symbol("RESET"),h=(H,K,$=K)=>{try{if(H instanceof Promise)throw H;if(!Array.isArray(H))return H(K,$);let B=H.filter(z).map((Z)=>Z(K,$));return()=>{B.filter(z).forEach((Z)=>Z()),B.length=0}}catch(B){if(B instanceof Promise)B.then(()=>h(H,K,$));else throw new WH(K,B instanceof Error?B:new Error(String(B)))}},m=(H,K,$,B)=>{try{return O(H)?K.getSignal(H).get():D(H)?H.get():z(H)?H($):N}catch(Z){if(B)I(Z,`Failed to resolve value of ${p(H)}${B?` for ${B}`:""} in ${Y($)}${K!==$?` in ${Y(K)}`:""}`,w);return N}};var NH=(H)=>{let K=new Set;if(H.includes("."))K.add("class");if(H.includes("#"))K.add("id");if(H.includes("[")){let $=H.split("[");for(let B=1;B<$.length;B++){let Z=$[B];if(!Z.includes("]"))continue;let J=Z.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(J)K.add(J)}}return[...K]},SH=(H,K)=>{if(H.length!==K.length)return!1;let $=new Set(H);for(let B of K)if(!$.has(B))return!1;return!0},l=(H)=>z(H)&&H.length>=2,U=(H,K)=>z(K)?K(H):K,XH=(H,K)=>($)=>{let B=$.shadowRoot??$,Z=(A,L)=>{let Q=B.querySelector(A);if(!Q)return;let W=L(Q);if(W!=null)return W},J=void 0;for(let[A,L]of Object.entries(K))if(J=Z(A,L),J!=null)break;return O(J)&&l(H)?H($,J):J??U($,H)},MH=(H,K,$)=>{let B=new MutationObserver($),Z={childList:!0,subtree:!0},J=NH(K);if(J.length)Z.attributes=!0,Z.attributeFilter=J;return B.observe(H,Z),B},qH=(H)=>{let K=H.shadowRoot??H,$=new Set;function B(L,Q){let W=K.querySelector(L);if(Q!=null&&!W)throw new s(H,L,Q);if(W&&o(W))$.add(W.localName);return W}function Z(L,Q){let W=K.querySelectorAll(L);if(Q!=null&&!W.length)throw new s(H,L,Q);if(W.length)W.forEach((X)=>{if(o(X))$.add(X.localName)});return W}return[{useElement:B,useElements:Z,first:(L,Q,W)=>{let X=W!=null?B(L,W):B(L);return()=>{if(X)return h(Q,H,X)}},all:(L,Q,W)=>{let X=W!=null?Z(L,W):Z(L);return()=>{let x=new Map,j=(y)=>{let F=h(Q,H,y);if(F&&!x.has(y))x.set(y,F)},C=(y)=>{let F=x.get(y);if(F)F();x.delete(y)},P=(y)=>(F)=>{if(CH(F)){if(F.matches(L))y(F);F.querySelectorAll(L).forEach(y)}},G=MH(K,L,(y)=>{for(let F of y)F.addedNodes.forEach(P(j)),F.removedNodes.forEach(P(C))});if(X.length)X.forEach(j);return()=>{G.disconnect(),x.forEach((y)=>y()),x.clear()}}}},()=>Array.from($)]};function kH(H){return(K)=>{let $=new Set,B=()=>Array.from((K.shadowRoot??K).querySelectorAll(H)),Z=V,J,A=0,L=2,Q=()=>{Z=B(),J=MH(K,H,()=>{if(!$.size){J?.disconnect(),J=void 0;return}if(A++,A>L)throw J?.disconnect(),J=void 0,A=0,new JH(K,H);try{let W=B();if(!SH(Z,W))Z=W,_($)}finally{A--}})};return{[Symbol.toStringTag]:b,get(){if(R($),!$.size)Z=B();else if(!J)Q();return Z}}}}var EH=50,bH=new Set(["constructor","prototype"]),fH=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),OH=(H)=>{if(bH.has(H))return`Property name "${H}" is a reserved word`;if(fH.has(H))return`Property name "${H}" conflicts with inherited HTMLElement property`;return null};function dH(H,K={},$){if(!H.includes("-")||!H.match(/^[a-z][a-z0-9-]*$/))throw new LH(H);for(let Z of Object.keys(K)){let J=OH(Z);if(J)throw new n(H,Z,J)}class B extends HTMLElement{debug;#H={};#K;static observedAttributes=Object.entries(K)?.filter(([,Z])=>l(Z)).map(([Z])=>Z)??[];connectedCallback(){if(q){if(this.debug=this.hasAttribute("debug"),this.debug)I(this,"Connected")}for(let[W,X]of Object.entries(K)){if(X==null||W in this)continue;let x=z(X)?X(this,null):X;if(x!=null)this.setSignal(W,T(x))}let[Z,J]=qH(this),A=$(this,Z),L=J(),Q=()=>{let W=h(A,this);if(W)this.#K=W};if(L.length)Promise.race([Promise.all(L.map((W)=>customElements.whenDefined(W))),new Promise((W,X)=>{setTimeout(()=>{X(new QH(this,L.filter((x)=>!customElements.get(x))))},EH)})]).then(Q).catch((W)=>{if(q)I(W,`Error during setup of <${H}>. Trying to run effects anyway.`,BH);Q()});else Q()}disconnectedCallback(){if(z(this.#K))this.#K();if(q&&this.debug)I(this,"Disconnected")}attributeChangedCallback(Z,J,A){if(A===J||g(this.#H[Z]))return;let L=K[Z];if(!l(L))return;let Q=L(this,A,J);if(q&&this.debug)I(A,`Attribute "${String(Z)}" of ${Y(this)} changed from ${p(J)} to ${p(A)}, parsed as <${ZH(Q)}> ${p(Q)}`);if(Z in this)this[Z]=Q;else this.setSignal(Z,T(Q))}getSignal(Z){let J=this.#H[Z];if(q&&this.debug)I(J,`Get ${ZH(J)} "${String(Z)}" in ${Y(this)}`);return J}setSignal(Z,J){let A=OH(String(Z));if(A)throw new n(this.localName,Z,A);if(!D(J))throw new AH(this,Z);let L=this.#H[Z],Q=M(J);if(this.#H[Z]=J,Object.defineProperty(this,Z,{get:J.get,set:Q?J.set:void 0,enumerable:!0,configurable:Q}),L&&M(L))L.set(V);if(q&&this.debug)I(J,`Set ${ZH(J)} "${String(Z)} in ${Y(this)}`)}}customElements.define(H,B)}var gH=(H,K,$)=>(B)=>{let Z=new Set,J=U(B,H),A=new Map,L,Q=()=>{for(let[W,X]of Object.entries($)){let x=(j)=>{let C=j.target;if(!C)return;let P=C.closest(K);if(!P||!B.contains(P))return;j.stopPropagation();try{let G=X({event:j,host:B,target:P,value:J});if(G==null)return;if(!Object.is(G,J)){if(J=G,Z.size>0)_(Z);else if(L)L()}}catch(G){throw j.stopImmediatePropagation(),G}};A.set(W,x),B.addEventListener(W,x)}L=()=>{if(A.size){for(let[W,X]of A)B.removeEventListener(W,X);A.clear()}L=void 0}};return{[Symbol.toStringTag]:b,get(){if(R(Z),Z.size&&!A.size)Q();return J}}},pH=(H,K,$=!1)=>(B,Z)=>{let J=(A)=>{let L=K({host:B,target:Z,event:A});if(!i(L))return;HH(()=>{for(let[Q,W]of Object.entries(L)){let X=B.getSignal(Q);if(M(X))X.set(W);else I(W,`Reactive property "${Q}" on ${Y(B)} from event ${H} on ${Y(Z)} could not be set, because it is read-only.`,w)}})};return Z.addEventListener(H,J,$),()=>Z.removeEventListener(H,J)},hH=(H,K)=>($,B)=>f(()=>{let Z=m(K,$,B,`custom event "${H}" detail`);if(Z===N||Z===V)return;B.dispatchEvent(new CustomEvent(H,{detail:Z,bubbles:!0}))});var zH="context-request";class _H extends Event{H;K;$;constructor(H,K,$=!1){super(zH,{bubbles:!0,composed:!0});this.context=H;this.callback=K;this.subscribe=$}}var mH=(H)=>(K)=>{let $=(B)=>{let{context:Z,callback:J}=B;if(H.includes(Z)&&z(J))B.stopImmediatePropagation(),J(K.getSignal(String(Z)))};return K.addEventListener(zH,$),()=>K.removeEventListener(zH,$)},vH=(H,K)=>($)=>{let B=T(U($,K));return $.dispatchEvent(new _H(H,(Z)=>{B=Z})),B};var VH=(H,K)=>{if(K==null)return;let $=H(K);return Number.isFinite($)?$:void 0},uH=()=>(H,K)=>K!=null&&K!=="false",cH=(H=0)=>(K,$)=>{if($==null)return U(K,H);let B=$.trim();if(B.toLowerCase().startsWith("0x"))return VH((J)=>parseInt(J,16),B)??U(K,H);let Z=VH(parseFloat,$);return Z!=null?Math.trunc(Z):U(K,H)},iH=(H=0)=>(K,$)=>VH(parseFloat,$)??U(K,H),oH=(H="")=>(K,$)=>$??U(K,H),nH=(H)=>(K,$)=>{if($==null)return H[0];let B=$.toLowerCase();return H.find((J)=>J.toLowerCase()===B)?$:H[0]},sH=(H)=>(K,$)=>{if(($??H)==null)throw new TypeError("asJSON: Value and fallback are both null or undefined");if($==null)return U(K,H);if($==="")throw new TypeError("Empty string is not valid JSON");let B;try{B=JSON.parse($)}catch(Z){throw new SyntaxError(`Failed to parse JSON: ${String(Z)}`,{cause:Z})}return B??U(K,H)};var lH=(H,K="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[H]+K},rH=(H,K,$,B,Z)=>{return{ok:(L)=>()=>{if(q&&H.debug)I(K,`${L} ${$} of ${Y(K)} in ${Y(H)}`);B?.(K)},err:(L)=>(Q)=>{I(Q,`Failed to ${L} ${$} of ${Y(K)} in ${Y(H)}`,w),Z?.(Q)}}},aH=(H)=>{if(/^(mailto|tel):/i.test(H))return!0;if(H.includes("://"))try{let K=new URL(H,window.location.origin);return["http:","https:","ftp:"].includes(K.protocol)}catch{return!1}return!0},tH=(H,K,$)=>{if(/^on/i.test(K))throw new Error(`Unsafe attribute: ${K}`);if($=String($).trim(),!aH($))throw new Error(`Unsafe URL for ${K}: ${$}`);H.setAttribute(K,$)},S=(H,K)=>($,B)=>{let{op:Z,name:J="",read:A,update:L}=K,Q=A(B),W=lH(Z,J);if(O(H)&&O(Q)&&$[H]===N)$.attributeChangedCallback(H,null,Q);let{ok:X,err:x}=rH($,B,W,K.resolve,K.reject);return f(()=>{let j=Symbol(J?`${Z}:${J}`:Z),C=m(H,$,B,W),P=C===N?Q:C===V?K.delete?null:Q:C;if(K.delete&&P===null)E(()=>{return K.delete(B),!0},j).then(X("Deleted")).catch(x("delete"));else if(P!=null){let G=A(B);if(Object.is(P,G))return;E(()=>{return L(B,P),!0},j).then(X("Updated")).catch(x("update"))}})},eH=(H,K)=>($,B)=>{let Z=(A)=>()=>{if(q&&$.debug)I(B,`${A} element in ${Y(B)} in ${Y($)}`);if(z(K?.resolve))K.resolve(B);else{let L=D(H)?H:O(H)?$.getSignal(H):void 0;if(M(L))L.set(0)}},J=(A)=>(L)=>{I(L,`Failed to ${A} element in ${Y(B)} in ${Y($)}`,w),K?.reject?.(L)};return f(()=>{let A=Symbol("i"),L=Symbol("r"),Q=m(H,$,B,"insertion or deletion"),W=Q===N?0:Q;if(W>0){if(!K)throw new TypeError("No inserter provided");E(()=>{for(let X=0;X<W;X++){let x=K.create(B);if(!x)continue;B.insertAdjacentElement(K.position??"beforeend",x)}return!0},A).then(Z("Inserted")).catch(J("insert"))}else if(W<0)E(()=>{if(K&&(K.position==="afterbegin"||K.position==="beforeend"))for(let X=0;X>W;X--)if(K.position==="afterbegin")B.firstElementChild?.remove();else B.lastElementChild?.remove();else B.remove();return!0},L).then(Z("Removed")).catch(J("remove"))})},HK=(H)=>S(H,{op:"t",read:(K)=>K.textContent,update:(K,$)=>{Array.from(K.childNodes).filter((B)=>B.nodeType!==Node.COMMENT_NODE).forEach((B)=>B.remove()),K.append(document.createTextNode($))}}),KK=(H,K=H)=>S(K,{op:"p",name:H,read:($)=>(H in $)?$[H]:V,update:($,B)=>{$[H]=B}}),$K=(H)=>S(H,{op:"p",name:"hidden",read:(K)=>!K.hidden,update:(K,$)=>{K.hidden=!$}});var BK=(H,K=H)=>S(K,{op:"a",name:H,read:($)=>$.getAttribute(H),update:($,B)=>{tH($,H,B)},delete:($)=>{$.removeAttribute(H)}}),ZK=(H,K=H)=>S(K,{op:"a",name:H,read:($)=>$.hasAttribute(H),update:($,B)=>{$.toggleAttribute(H,B)}}),JK=(H,K=H)=>S(K,{op:"c",name:H,read:($)=>$.classList.contains(H),update:($,B)=>{$.classList.toggle(H,B)}}),LK=(H,K=H)=>S(K,{op:"s",name:H,read:($)=>$.style.getPropertyValue(H),update:($,B)=>{$.style.setProperty(H,B)},delete:($)=>{$.style.removeProperty(H)}}),WK=(H,K={})=>S(H,{op:"h",read:($)=>($.shadowRoot||!K.shadowRootMode?$:null)?.innerHTML??"",update:($,B)=>{let{shadowRootMode:Z,allowScripts:J}=K;if(!B){if($.shadowRoot)$.shadowRoot.innerHTML="<slot></slot>";return""}if(Z&&!$.shadowRoot)$.attachShadow({mode:Z});let A=$.shadowRoot||$;if(A.innerHTML=B,!J)return"";return A.querySelectorAll("script").forEach((L)=>{let Q=document.createElement("script");Q.appendChild(document.createTextNode(L.textContent??"")),A.appendChild(Q),L.remove()})," with scripts"}}),AK=(H)=>(K,$)=>{if(!i(H))throw new TypeError("Reactives must be an object of passed signals");if(!o($))throw new TypeError(`Target ${Y($)} is not a custom element`);customElements.whenDefined($.localName).then(()=>{if(!PH($,"setSignal"))throw new TypeError(`Target ${Y($)} is not a UIElement component`);for(let[B,Z]of Object.entries(H))$.setSignal(B,O(Z)?K.getSignal(Z):T(Z))}).catch((B)=>{throw new Error(`Failed to pass signals to ${Y($)}`,{cause:B})})};var jH=()=>(H)=>H.textContent?.trim(),QK=(H)=>(K)=>K[H],XK=(H)=>(K)=>K.hasAttribute(H),IH=(H)=>(K)=>K.getAttribute(H),YK=(H)=>(K)=>K.classList.contains(H),xK=(H)=>(K)=>window.getComputedStyle(K).getPropertyValue(H),GK=(H)=>XH("",{".label":jH(),[H]:IH("aria-label")}),yK=(H)=>XH("",{".description":jH(),[H]:IH("aria-describedby")});export{S as updateElement,JK as toggleClass,ZK as toggleAttribute,T as toSignal,KH as state,$K as show,HK as setText,LK as setStyle,KK as setProperty,BK as setAttribute,m as resolveReactive,mH as provideContexts,AK as pass,pH as on,I as log,M as isState,D as isSignal,l as isParser,g as isComputed,eH as insertOrRemoveElement,YK as hasClass,XK as hasAttribute,jH as getText,xK as getStyle,QK as getProperty,GK as getLabel,U as getFallback,yK as getDescription,IH as getAttribute,kH as fromSelector,gH as fromEvents,XH as fromDOM,vH as fromContext,E as enqueue,hH as emitEvent,f as effect,WK as dangerouslySetInnerHTML,$H as computed,dH as component,HH as batch,oH as asString,iH as asNumber,sH as asJSON,cH as asInteger,nH as asEnum,uH as asBoolean,V as UNSET,N as RESET,s as MissingElementError,BH as LOG_WARN,DH as LOG_INFO,w as LOG_ERROR,FH as LOG_DEBUG,AH as InvalidSignalError,n as InvalidPropertyNameError,WH as InvalidEffectsError,LH as InvalidComponentNameError,QH as DependencyTimeoutError,JH as CircularMutationError};

//# debugId=78AA906F81B14CBD64756E2164756E21
