var I=($)=>typeof $==="function",p=($,W)=>Object.prototype.toString.call($)===`[object ${W}]`,h=($)=>$ instanceof Error?$:Error(String($));class E extends Error{constructor($){super(`Circular dependency in ${$} detected`);return this}}var S,v=new Set,l=0,r=new Map,c,H$=()=>{c=void 0;let $=Array.from(r.values());r.clear();for(let W of $)W()},L$=()=>{if(c)cancelAnimationFrame(c);c=requestAnimationFrame(H$)};queueMicrotask(H$);var m=($)=>{let W=new Set,B=$;return B.off=(Z)=>{W.add(Z)},B.cleanup=()=>{for(let Z of W)Z();W.clear()},B},_=($)=>{if(S&&!$.has(S)){let W=S;$.add(W),S.off(()=>{$.delete(W)})}},M=($)=>{for(let W of $)if(l)v.add(W);else W()},i=()=>{while(v.size){let $=Array.from(v);v.clear();for(let W of $)W()}},Q$=($)=>{l++;try{$()}finally{i(),l--}},g=($,W)=>{let B=S;S=W;try{$()}finally{S=B}},k=($,W)=>new Promise((B,Z)=>{r.set(W||Symbol(),()=>{try{B($())}catch(J){Z(J)}}),L$()});var a="State",u=($)=>{let W=new Set,B=$,Z={[Symbol.toStringTag]:a,get:()=>{return _(W),B},set:(J)=>{if(Object.is(B,J))return;if(B=J,M(W),j===B)W.clear()},update:(J)=>{Z.set(J(B))}};return Z},U=($)=>p($,a);var f="Computed",o=($)=>{let W=new Set,B=j,Z,J,H=!0,Q=!1,z=!1,X=(V)=>{if(!Object.is(V,B))B=V,Q=!0;Z=void 0,H=!1},K=()=>{Q=j!==B,B=j,Z=void 0},Y=(V)=>{let y=h(V);Q=!Z||y.name!==Z.name||y.message!==Z.message,B=j,Z=y},x=(V)=>(y)=>{if(z=!1,J=void 0,V(y),Q)M(W)},q=m(()=>{if(H=!0,J?.abort("Aborted because source signal changed"),W.size)M(W);else q.cleanup()}),F=()=>g(()=>{if(z)throw new E("computed");if(Q=!1,I($)&&$.constructor.name==="AsyncFunction"){if(J)return B;J=new AbortController,J.signal.addEventListener("abort",()=>{z=!1,J=void 0,F()},{once:!0})}let V;z=!0;try{V=J?$(J.signal):$()}catch(y){if(y instanceof DOMException&&y.name==="AbortError")K();else Y(y);z=!1;return}if(V instanceof Promise)V.then(x(X),x(Y));else if(V==null||j===V)K();else X(V);z=!1},q);return{[Symbol.toStringTag]:f,get:()=>{if(_(W),i(),H)F();if(Z)throw Z;return B}}},d=($)=>p($,f),t=($)=>I($)&&$.length<2;var j=Symbol(),R=($)=>U($)||d($),D=($)=>R($)?$:t($)?o($):u($);function b($){let{signals:W,ok:B,err:Z=console.error,nil:J=()=>{}}=I($)?{signals:[],ok:$}:$,H=!1,Q=m(()=>g(()=>{if(H)throw new E("effect");H=!0;let z=[],X=!1,K=W.map((x)=>{try{let q=x.get();if(q===j)X=!0;return q}catch(q){return z.push(h(q)),j}}),Y=void 0;try{Y=X?J():z.length?Z(...z):B(...K)}catch(x){Y=Z(h(x))}finally{if(I(Y))Q.off(Y)}H=!1},Q));return Q(),()=>Q.cleanup()}var C=!1,z$="debug",x$="info",K$="warn",T="error",F$=($)=>$?`#${$}`:"",C$=($)=>$.length?`.${Array.from($).join(".")}`:"",e=($)=>!!$&&typeof $==="object",N=($)=>typeof $==="string",X$=($,W)=>N(W)&&(W in $)&&I($[W]),Y$=($)=>$.nodeType===Node.ELEMENT_NODE,$$=($)=>$.localName.includes("-"),I$=($)=>{if(!$$($))return!0;let W=customElements.get($.localName);return!!W&&$ instanceof W},G=($)=>`<${$.localName}${F$($.id)}${C$($.classList)}>`,w=($)=>N($)?`"${$}"`:e($)?JSON.stringify($):String($),n=($)=>{if($===null)return"null";if(typeof $!=="object")return typeof $;if(Array.isArray($))return"Array";if(Symbol.toStringTag in Object($))return $[Symbol.toStringTag];return $.constructor?.name||"Object"},L=($,W,B=z$)=>{if(C||[T,K$].includes(B))console[B](W,$);return $};class G$ extends Error{constructor($){super($);this.name="CircularMutationError"}}var y$=($)=>{let W=new Set;if($.includes("."))W.add("class");if($.includes("#"))W.add("id");if($.includes("[")){let B=$.split("[");for(let Z=1;Z<B.length;Z++){let J=B[Z];if(!J.includes("]"))continue;let H=J.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(H)W.add(H)}}return[...W]},M$=($,W)=>{if($.length!==W.length)return!1;let B=new Set($);for(let Z of W)if(!B.has(Z))return!1;return!0},B$=($,W,B)=>{let Z=new MutationObserver(B),J=y$(W),H={childList:!0,subtree:!0};if(J.length)H.attributes=!0,H.attributeFilter=J;return Z.observe($,H),Z},j$=($)=>(W)=>{let B=new Set,Z=()=>Array.from(W.querySelectorAll($)),J=j,H,Q=0,z=2,X=()=>{J=Z(),H=B$(W,$,()=>{if(!B.size){H?.disconnect(),H=void 0;return}if(Q++,Q>z)throw H?.disconnect(),H=void 0,Q=0,new G$("Circular mutation in element selection detected");try{let K=Z();if(!M$(J,K))J=K,M(B)}finally{Q--}})};return{[Symbol.toStringTag]:f,get:()=>{if(_(B),!B.size)J=Z();else if(!H)X();return J}}},U$=($,W,B)=>(Z)=>()=>j$($)(Z).get().reduce(W,I(B)?B(Z):B),P$=($,W,B,Z,J=!1)=>(H)=>{let Q=new Set,z=I(Z)?Z(H):Z,X,K,Y=()=>{X=(x)=>{let q=x.target;if(!q)return;let F=q.closest($);if(!F||!H.contains(F))return;x.stopPropagation();try{let A=B({event:x,host:H,source:F,value:z});if(!Object.is(A,z)){if(z=A,Q.size>0)M(Q);else if(K)K()}}catch(A){throw x.stopImmediatePropagation(),A}},H.addEventListener(W,X,J),K=()=>{if(X)H.removeEventListener(W,X),X=void 0;K=void 0}};return{[Symbol.toStringTag]:f,get:()=>{if(_(Q),Q.size&&!X)Y();return z}}},O$=($,W,B)=>(Z)=>()=>{let J=Z.querySelector($);if(!J||!I$(J))return B;let H=W in J?J[W]:B;return H==null||H===j?B:H};var P=Symbol(),_$=new Set(["constructor","prototype"]),R$=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),W$=($)=>I($)&&$.length>=2,V$=($)=>{if(_$.has($))return`Property name "${$}" is a reserved word`;if(R$.has($))return`Property name "${$}" conflicts with inherited HTMLElement property`;return null},Z$=($,W,B=W)=>{let Z=$.filter(I).map((J)=>J(W,B));return()=>{Z.filter(I).forEach((J)=>J()),Z.length=0}},D$=()=>({first:($,...W)=>(B)=>{let Z=(B.shadowRoot||B).querySelector($);if(Z)Z$(W,B,Z)},all:($,...W)=>(B)=>{let Z=new Map,J=B.shadowRoot||B,H=(K)=>{if(!Z.has(K))Z.set(K,Z$(W,B,K))},Q=(K)=>{let Y=Z.get(K);if(I(Y))Y();Z.delete(K)},z=(K)=>(Y)=>{if(Y$(Y)){if(Y.matches($))K(Y);Y.querySelectorAll($).forEach(K)}},X=B$(J,$,(K)=>{for(let Y of K)Y.addedNodes.forEach(z(H)),Y.removedNodes.forEach(z(Q))});return J.querySelectorAll($).forEach(H),()=>{X.disconnect(),Z.forEach((K)=>K()),Z.clear()}}}),T$=($,W={},B)=>{for(let Z of Object.keys(W)){let J=V$(Z);if(J)throw new TypeError(`${J} in component "${$}".`)}customElements.define($,class extends HTMLElement{debug;#$={};#B;static observedAttributes=Object.entries(W)?.filter(([,Z])=>W$(Z)).map(([Z])=>Z)??[];constructor(){super();for(let[Z,J]of Object.entries(W)){if(J==null)continue;let H=W$(J)?J(this,null):I(J)?J(this):J;if(H!=null)this.setSignal(Z,D(H))}}connectedCallback(){if(C){if(this.debug=this.hasAttribute("debug"),this.debug)L(this,"Connected")}let Z=B(this,D$());if(!Array.isArray(Z))throw new TypeError(`Expected array of functions as return value of setup function in ${G(this)}`);this.#B=Z$(Z,this)}disconnectedCallback(){if(I(this.#B))this.#B();if(C&&this.debug)L(this,"Disconnected")}attributeChangedCallback(Z,J,H){if(H===J||d(this.#$[Z]))return;let Q=W[Z];if(!W$(Q))return;let z=Q(this,H,J);if(C&&this.debug)L(H,`Attribute "${Z}" of ${G(this)} changed from ${w(J)} to ${w(H)}, parsed as <${n(z)}> ${w(z)}`);this[Z]=z}getSignal(Z){let J=this.#$[Z];if(C&&this.debug)L(J,`Get ${n(J)} "${String(Z)}" in ${G(this)}`);return J}setSignal(Z,J){let H=V$(String(Z));if(H)throw new TypeError(`${H} on ${G(this)}.`);if(!R(J))throw new TypeError(`Expected signal as value for property "${String(Z)}" on ${G(this)}.`);let Q=this.#$[Z],z=U(J);if(this.#$[Z]=J,Object.defineProperty(this,Z,{get:J.get,set:z?J.set:void 0,enumerable:!0,configurable:z}),Q&&U(Q))Q.set(j);if(C&&this.debug)L(J,`Set ${n(J)} "${String(Z)} in ${G(this)}`)}})};var J$="context-request";class q$ extends Event{$;W;B;constructor($,W,B=!1){super(J$,{bubbles:!0,composed:!0});this.context=$;this.callback=W;this.subscribe=B}}var N$=($)=>(W)=>{let B=(Z)=>{let{context:J,callback:H}=Z;if($.includes(J)&&I(H))Z.stopImmediatePropagation(),H(W.getSignal(String(J)))};return W.addEventListener(J$,B),()=>W.removeEventListener(J$,B)},w$=($,W)=>(B)=>{let Z=D(W);return B.dispatchEvent(new q$($,(J)=>{Z=J})),Z};var A$=($,W)=>{if(W==null)return;let B=$(W);return Number.isFinite(B)?B:void 0},S$=()=>($,W)=>W!=="false"&&W!=null,k$=($=0)=>(W,B)=>{if(B==null)return $;let Z=B.trim();if(Z==="")return $;if(Z.toLowerCase().startsWith("0x")){let H=parseInt(Z,16);return Number.isFinite(H)?H:$}let J=A$(parseFloat,B);return J!=null?Math.trunc(J):$},b$=($=0)=>(W,B)=>A$(parseFloat,B)??$,E$=($="")=>(W,B)=>B??$,f$=($)=>(W,B)=>{if(B==null)return $[0];let Z=B.toLowerCase();return $.find((H)=>H.toLowerCase()===Z)?B:$[0]},d$=($)=>(W,B)=>{if((B??$)==null)throw new ReferenceError("Value and fallback are both null or undefined");if(B==null)return $;if(B==="")throw new SyntaxError("Empty string is not valid JSON");let Z;try{Z=JSON.parse(B)}catch(J){throw new SyntaxError(`Failed to parse JSON: ${String(J)}`,{cause:J})}return Z??$};var s=($,W,B)=>N($)?W.getSignal($).get():R($)?$.get():I($)?$(B):P,h$=($)=>{if(/^(mailto|tel):/i.test($))return!0;if($.includes("://"))try{let W=new URL($,window.location.origin);return["http:","https:","ftp:"].includes(W.protocol)}catch{return!1}return!0},m$=($,W,B)=>{if(/^on/i.test(W))throw new Error(`Unsafe attribute: ${W}`);if(B=String(B).trim(),!h$(B))throw new Error(`Unsafe URL for ${W}: ${B}`);$.setAttribute(W,B)},O=($,W)=>(B,Z)=>{let{op:J,name:H="",read:Q,update:z}=W,X=Q(Z),K={a:"attribute ",c:"class ",h:"inner HTML",p:"property ",s:"style property ",t:"text content"};if(N($)&&N(X)&&B[$]===P)B.attributeChangedCallback($,null,X);let Y=(q)=>()=>{if(C&&B.debug)L(Z,`${q} ${K[J]+H} of ${G(Z)} in ${G(B)}`);W.resolve?.(Z)},x=(q)=>(F)=>{L(F,`Failed to ${q} ${K[J]+H} of ${G(Z)} in ${G(B)}`,T),W.reject?.(F)};return b(()=>{let q=Symbol(`${J}:${H}`),F=Symbol(`${J}-${H}`),A=P;try{A=s($,B,Z)}catch(V){L(V,`Failed to resolve value of ${w($)} for ${K[J]+H} of ${G(Z)} in ${G(B)}`,T);return}if(A===P)A=X;else if(A===j)A=W.delete?null:X;if(W.delete&&A===null)k(()=>{return W.delete(Z),!0},F).then(Y("Deleted")).catch(x("delete"));else if(A!=null){let V=Q(Z);if(Object.is(A,V))return;k(()=>{return z(Z,A),!0},q).then(Y("Updated")).catch(x("update"))}})},g$=($,W)=>(B,Z)=>{let J=(Q)=>()=>{if(C&&B.debug)L(Z,`${Q} element in ${G(Z)} in ${G(B)}`);if(I(W?.resolve))W.resolve(Z);else{let z=R($)?$:N($)?B.getSignal($):void 0;if(U(z))z.set(0)}},H=(Q)=>(z)=>{L(z,`Failed to ${Q} element in ${G(Z)} in ${G(B)}`,T),W?.reject?.(z)};return b(()=>{let Q=Symbol("i"),z=Symbol("d"),X=0;try{X=s($,B,Z)}catch(K){L(K,`Failed to resolve value of ${w($)} for insertion or deletion in ${G(Z)} in ${G(B)}`,T);return}if(X===P)X=0;if(X>0){if(!W)throw new TypeError("No inserter provided");k(()=>{for(let K=0;K<X;K++){let Y=W.create(Z);if(!Y)continue;Z.insertAdjacentElement(W.position??"beforeend",Y)}return!0},Q).then(J("Inserted")).catch(H("insert"))}else if(X<0)k(()=>{if(W&&(W.position==="afterbegin"||W.position==="beforeend"))for(let K=0;K>X;K--)if(W.position==="afterbegin")Z.firstElementChild?.remove();else Z.lastElementChild?.remove();else Z.remove();return!0},z).then(J("Removed")).catch(H("remove"))})},p$=($)=>O($,{op:"t",read:(W)=>W.textContent,update:(W,B)=>{Array.from(W.childNodes).filter((Z)=>Z.nodeType!==Node.COMMENT_NODE).forEach((Z)=>Z.remove()),W.append(document.createTextNode(B))}}),v$=($,W=$)=>O(W,{op:"p",name:String($),read:(B)=>($ in B)?B[$]:j,update:(B,Z)=>{B[$]=Z}}),c$=($)=>O($,{op:"p",name:"hidden",read:(W)=>!W.hidden,update:(W,B)=>{W.hidden=!B}}),i$=($,W=$)=>O(W,{op:"a",name:$,read:(B)=>B.getAttribute($),update:(B,Z)=>{m$(B,$,Z)},delete:(B)=>{B.removeAttribute($)}}),u$=($,W=$)=>O(W,{op:"a",name:$,read:(B)=>B.hasAttribute($),update:(B,Z)=>{B.toggleAttribute($,Z)}}),o$=($,W=$)=>O(W,{op:"c",name:$,read:(B)=>B.classList.contains($),update:(B,Z)=>{B.classList.toggle($,Z)}}),n$=($,W=$)=>O(W,{op:"s",name:$,read:(B)=>B.style.getPropertyValue($),update:(B,Z)=>{B.style.setProperty($,Z)},delete:(B)=>{B.style.removeProperty($)}}),s$=($,W={})=>O($,{op:"h",read:(B)=>(B.shadowRoot||!W.shadowRootMode?B:null)?.innerHTML??"",update:(B,Z)=>{let{shadowRootMode:J,allowScripts:H}=W;if(!Z){if(B.shadowRoot)B.shadowRoot.innerHTML="<slot></slot>";return""}if(J&&!B.shadowRoot)B.attachShadow({mode:J});let Q=B.shadowRoot||B;if(Q.innerHTML=Z,!H)return"";return Q.querySelectorAll("script").forEach((z)=>{let X=document.createElement("script");X.appendChild(document.createTextNode(z.textContent??"")),Q.appendChild(X),z.remove()})," with scripts"}}),l$=($,W,B=!1)=>(Z,J=Z)=>{if(!I(W))throw new TypeError(`Invalid event listener provided for "${$} event on element ${G(J)}`);return J.addEventListener($,W,B),()=>J.removeEventListener($,W)},r$=($,W)=>(B,Z=B)=>b(()=>{let J;try{J=s(W,B,Z)}catch(H){L(H,`Failed to resolve value of ${w(W)} for custom event detail emitted on ${G(Z)} in ${G(B)}`,T);return}if(J===P||J===j)return;Z.dispatchEvent(new CustomEvent($,{detail:J,bubbles:!0}))}),a$=($)=>(W,B)=>{let Z=I($)?$(B):$;if(!e(Z))throw new TypeError("Passed signals must be an object or a provider function");let J=()=>b(()=>{for(let[H,Q]of Object.entries(Z)){let z;try{z=s(Q,W,B)}catch(X){throw new Error(`Failed to resolve signal ${H} for ${G(B)}`,{cause:X})}if(z==null||z===P)continue;B[H]=z}});if(!$$(B))return J();customElements.whenDefined(B.localName).then(()=>{if(!X$(B,"setSignal"))return J();for(let[H,Q]of Object.entries(Z))B.setSignal(H,N(Q)?W.getSignal(Q):D(Q))}).catch((H)=>{throw new Error(`Failed to pass signals to ${G(B)}`,{cause:H})})};export{O as updateElement,o$ as toggleClass,u$ as toggleAttribute,D as toSignal,u as state,c$ as show,p$ as setText,n$ as setStyle,v$ as setProperty,i$ as setAttribute,N$ as provide,a$ as pass,l$ as on,L as log,U as isState,R as isSignal,d as isComputed,g$ as insertOrRemoveElement,j$ as fromSelector,P$ as fromEvent,U$ as fromDescendants,O$ as fromDescendant,w$ as fromContext,k as enqueue,r$ as emit,b as effect,s$ as dangerouslySetInnerHTML,o as computed,T$ as component,Q$ as batch,E$ as asString,b$ as asNumber,d$ as asJSON,k$ as asInteger,f$ as asEnum,S$ as asBoolean,j as UNSET,P as RESET,K$ as LOG_WARN,x$ as LOG_INFO,T as LOG_ERROR,z$ as LOG_DEBUG};

//# debugId=71EDA67FFC1BF91C64756E2164756E21
