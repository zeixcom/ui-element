var z=(K)=>typeof K==="function",l=(K,$)=>Object.prototype.toString.call(K)===`[object ${$}]`,v=(K)=>K instanceof Error?K:Error(String(K));class p extends Error{constructor(K){super(`Circular dependency in ${K} detected`);return this}}var S,r=new Set,WK=0,AK=new Map,a,UK=()=>{a=void 0;let K=Array.from(AK.values());AK.clear();for(let $ of K)$()},DK=()=>{if(a)cancelAnimationFrame(a);a=requestAnimationFrame(UK)};queueMicrotask(UK);var u=(K)=>{let $=new Set,B=K;return B.off=(Z)=>{$.add(Z)},B.cleanup=()=>{for(let Z of $)Z();$.clear()},B},C=(K)=>{if(S&&!K.has(S)){let $=S;K.add($),S.off(()=>{K.delete($)})}},x=(K)=>{for(let $ of K)if(WK)r.add($);else $()},t=()=>{while(r.size){let K=Array.from(r);r.clear();for(let $ of K)$()}},e=(K)=>{WK++;try{K()}finally{t(),WK--}},c=(K,$)=>{let B=S;S=$;try{K()}finally{S=B}},k=(K,$)=>new Promise((B,Z)=>{AK.set($||Symbol(),()=>{try{B(K())}catch(J){Z(J)}}),DK()});var HK="State",KK=(K)=>{let $=new Set,B=K,Z={[Symbol.toStringTag]:HK,get:()=>{return C($),B},set:(J)=>{if(Object.is(B,J))return;if(B=J,x($),V===B)$.clear()},update:(J)=>{Z.set(J(B))}};return Z},F=(K)=>l(K,HK);var b="Computed",E=(K)=>{let $=new Set,B=V,Z,J,W=!0,A=!1,H=!1,Q=(y)=>{if(!Object.is(y,B))B=y,A=!0;Z=void 0,W=!1},L=()=>{A=V!==B,B=V,Z=void 0},j=(y)=>{let q=v(y);A=!Z||q.name!==Z.name||q.message!==Z.message,B=V,Z=q},X=(y)=>(q)=>{if(H=!1,J=void 0,y(q),A)x($)},Y=u(()=>{if(W=!0,J?.abort("Aborted because source signal changed"),$.size)x($);else Y.cleanup()}),O=()=>c(()=>{if(H)throw new p("computed");if(A=!1,z(K)&&K.constructor.name==="AsyncFunction"){if(J)return B;J=new AbortController,J.signal.addEventListener("abort",()=>{H=!1,J=void 0,O()},{once:!0})}let y;H=!0;try{y=J?K(J.signal):K()}catch(q){if(q instanceof DOMException&&q.name==="AbortError")L();else j(q);H=!1;return}if(y instanceof Promise)y.then(X(Q),X(j));else if(y==null||V===y)L();else Q(y);H=!1},Y);return{[Symbol.toStringTag]:b,get:()=>{if(C($),t(),W)O();if(Z)throw Z;return B}}},g=(K)=>l(K,b),QK=(K)=>z(K)&&K.length<2;var V=Symbol(),D=(K)=>F(K)||g(K),R=(K)=>D(K)?K:QK(K)?E(K):KK(K);function f(K){let{signals:$,ok:B,err:Z=console.error,nil:J=()=>{}}=z(K)?{signals:[],ok:K}:K,W=!1,A=u(()=>c(()=>{if(W)throw new p("effect");W=!0;let H=[],Q=!1,L=$.map((X)=>{try{let Y=X.get();if(Y===V)Q=!0;return Y}catch(Y){return H.push(v(Y)),V}}),j=void 0;try{j=Q?J():H.length?Z(...H):B(...L)}catch(X){j=Z(v(X))}finally{if(z(j))A.off(j)}W=!1},A));return A(),()=>A.cleanup()}var M=!1,FK="debug",RK="info",xK="warn",w="error",wK=(K)=>K?`#${K}`:"",TK=(K)=>K?.length?`.${Array.from(K).join(".")}`:"",i=(K)=>!!K&&typeof K==="object",U=(K)=>typeof K==="string",MK=(K,$)=>U($)&&($ in K)&&z(K[$]),OK=(K)=>K.nodeType===Node.ELEMENT_NODE,n=(K)=>K.localName.includes("-");var G=(K)=>K?`<${K.localName}${wK(K.id)}${TK(K.classList)}>`:"<unknown>",d=(K)=>U(K)?`"${K}"`:i(K)?JSON.stringify(K):String(K),$K=(K)=>{if(K===null)return"null";if(typeof K!=="object")return typeof K;if(Array.isArray(K))return"Array";if(Symbol.toStringTag in Object(K))return K[Symbol.toStringTag];return K.constructor?.name||"Object"},I=(K,$,B=FK)=>{if(M||[w,xK].includes(B))console[B]($,K);return K};class XK extends Error{constructor(K,$){super(`Circular dependency detected in selection signal for component ${G(K)} with selector "${$}"`);this.name="CircularMutationError"}}class YK extends Error{constructor(K){super(`Invalid component name "${K}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class GK extends Error{constructor(K,$){super(`Expected element ${G($)} in ${G(K)} to be a custom element.`);this.name="InvalidCustomElementError"}}class BK extends Error{constructor(K,$,B){super(`Invalid property name "${$}" for component <${K}>. ${B}`);this.name="InvalidPropertyNameError"}}class LK extends Error{constructor(K,$){super(`Invalid effects in component <${G(K)}>. Effects must be an array of effects, a single effect function, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",$)this.cause=$}}class jK extends Error{constructor(K,$){super(`Expected signal as value for property "${String($)}" in component ${G(K)}.`);this.name="InvalidSignalError"}}class o extends Error{constructor(K,$,B){super(`Missing required element <${$}> in component ${G(K)}. ${B}`);this.name="MissingElementError"}}var NK=(K)=>{let $=new Set;if(K.includes("."))$.add("class");if(K.includes("#"))$.add("id");if(K.includes("[")){let B=K.split("[");for(let Z=1;Z<B.length;Z++){let J=B[Z];if(!J.includes("]"))continue;let W=J.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(W)$.add(W)}}return[...$]},SK=(K,$)=>{if(K.length!==$.length)return!1;let B=new Set(K);for(let Z of $)if(!B.has(Z))return!1;return!0},s=(K)=>z(K)&&K.length>=2,P=(K,$)=>z($)?$(K):$,ZK=(K,$)=>(B)=>{let Z=B.shadowRoot??B,J=(A,H)=>{let Q=Z.querySelector(A);if(!Q)return;let L=H(Q);if(L!=null)return L},W=void 0;for(let[A,H]of Object.entries($))if(W=J(A,H),W!=null)break;return U(W)&&s(K)?K(B,W):W??P(B,K)},zK=(K,$,B)=>{let Z=new MutationObserver(B),J={childList:!0,subtree:!0},W=NK($);if(W.length)J.attributes=!0,J.attributeFilter=W;return Z.observe(K,J),Z};function _K(K){return($)=>{let B=new Set,Z=()=>Array.from(($.shadowRoot??$).querySelectorAll(K)),J=V,W,A=0,H=2,Q=()=>{J=Z(),W=zK($,K,()=>{if(!B.size){W?.disconnect(),W=void 0;return}if(A++,A>H)throw W?.disconnect(),W=void 0,A=0,new XK($,K);try{let L=Z();if(!SK(J,L))J=L,x(B)}finally{A--}})};return{[Symbol.toStringTag]:b,get(){if(C(B),!B.size)J=Z();else if(!W)Q();return J}}}}var kK=(K,$,B,Z)=>E(()=>_K($)(K).get().reduce(B,Z)),bK=(K,$,B)=>{if(!K)return()=>B;if(!n(K))throw new TypeError("Target element must be a custom element");let Z=E(async()=>{return await customElements.whenDefined(K.localName),K.getSignal($)});return()=>{let J=Z.get();return J===V?B:J.get()}};function h(K,$,B){let Z=(K.shadowRoot||K).querySelector($);if(B&&!Z)throw new o(K,$,B);return Z}async function EK(K,$,B){let Z=U(B)?h(K,$,B):h(K,$);if(Z)if(n(Z))return await customElements.whenDefined(Z.localName),Z;else throw new GK(K,Z);return null}var fK=new Set(["constructor","prototype"]),pK=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),qK=(K)=>{if(fK.has(K))return`Property name "${K}" is a reserved word`;if(pK.has(K))return`Property name "${K}" conflicts with inherited HTMLElement property`;return null},JK=(K,$,B=$)=>{try{if(K instanceof Promise)throw K;if(!Array.isArray(K))return K($,B);let Z=K.filter(z).map((J)=>J($,B));return()=>{Z.filter(z).forEach((J)=>J()),Z.length=0}}catch(Z){if(Z instanceof Promise)Z.then(()=>JK(K,$,B));else throw new LK($,Z instanceof Error?Z:new Error(String(Z)))}},gK=()=>({first(K,$,B){return(Z)=>{let J=B!=null?h(Z,K,B):h(Z,K);if(J)return JK($,Z,J)}},all(K,$,B){return(Z)=>{let J=new Map,W=Z.shadowRoot??Z,A=(X)=>{let Y=JK($,Z,X);if(Y&&!J.has(X))J.set(X,Y)},H=(X)=>{let Y=J.get(X);if(Y)Y();J.delete(X)},Q=(X)=>(Y)=>{if(OK(Y)){if(Y.matches(K))X(Y);Y.querySelectorAll(K).forEach(X)}},L=zK(W,K,(X)=>{for(let Y of X)Y.addedNodes.forEach(Q(A)),Y.removedNodes.forEach(Q(H))}),j=W.querySelectorAll(K);if(!j.length&&B!=null)throw new o(Z,K,B);if(j.length)j.forEach(A);return()=>{L.disconnect(),J.forEach((X)=>X()),J.clear()}}}}),dK=(K,$={},B)=>{if(!K.includes("-")||!K.match(/^[a-z][a-z0-9-]*$/))throw new YK(K);for(let J of Object.keys($)){let W=qK(J);if(W)throw new BK(K,J,W)}class Z extends HTMLElement{debug;#K={};#$;static observedAttributes=Object.entries($)?.filter(([,J])=>s(J)).map(([J])=>J)??[];connectedCallback(){if(M){if(this.debug=this.hasAttribute("debug"),this.debug)I(this,"Connected")}for(let[W,A]of Object.entries($)){if(A==null||W in this)continue;let H=z(A)?A(this,null):A;if(H!=null)this.setSignal(W,R(H))}let J=JK(B(this,gK()),this);if(J)this.#$=J}disconnectedCallback(){if(z(this.#$))this.#$();if(M&&this.debug)I(this,"Disconnected")}attributeChangedCallback(J,W,A){if(A===W||g(this.#K[J]))return;let H=$[J];if(!s(H))return;let Q=H(this,A,W);if(M&&this.debug)I(A,`Attribute "${String(J)}" of ${G(this)} changed from ${d(W)} to ${d(A)}, parsed as <${$K(Q)}> ${d(Q)}`);if(J in this)this[J]=Q;else this.setSignal(J,R(Q))}getSignal(J){let W=this.#K[J];if(M&&this.debug)I(W,`Get ${$K(W)} "${String(J)}" in ${G(this)}`);return W}setSignal(J,W){let A=qK(String(J));if(A)throw new BK(this.localName,J,A);if(!D(W))throw new jK(this,J);let H=this.#K[J],Q=F(W);if(this.#K[J]=W,Object.defineProperty(this,J,{get:W.get,set:Q?W.set:void 0,enumerable:!0,configurable:Q}),H&&F(H))H.set(V);if(M&&this.debug)I(W,`Set ${$K(W)} "${String(J)} in ${G(this)}`)}}customElements.define(K,Z)};var N=Symbol("RESET"),m=(K,$,B,Z)=>{try{return U(K)?$.getSignal(K).get():D(K)?K.get():z(K)?K(B):N}catch(J){if(Z)I(J,`Failed to resolve value of ${d(K)}${Z?` for ${Z}`:""} in ${G(B)}${$!==B?` in ${G($)}`:""}`,w);return N}};var hK=(K,$,B)=>(Z)=>{let J=new Set,W=P(Z,K),A=new Map,H,Q=()=>{for(let[L,j]of Object.entries(B)){let X=(Y)=>{let O=Y.target;if(!O)return;let _=O.closest($);if(!_||!Z.contains(_))return;Y.stopPropagation();try{let y=j({event:Y,host:Z,target:_,value:W});if(y==null)return;if(!Object.is(y,W)){if(W=y,J.size>0)x(J);else if(H)H()}}catch(y){throw Y.stopImmediatePropagation(),y}};A.set(L,X),Z.addEventListener(L,X)}H=()=>{if(A.size){for(let[L,j]of A)Z.removeEventListener(L,j);A.clear()}H=void 0}};return{[Symbol.toStringTag]:b,get(){if(C(J),J.size&&!A.size)Q();return W}}},mK=(K,$,B=!1)=>(Z,J)=>{let W=(A)=>{let H=$({host:Z,target:J,event:A});if(!i(H))return;e(()=>{for(let[Q,L]of Object.entries(H)){let j=Z.getSignal(Q);if(F(j))j.set(L);else I(L,`Reactive property "${Q}" on ${G(Z)} from event ${K} on ${G(J)} could not be set, because it is read-only.`,w)}})};return J.addEventListener(K,W,B),()=>J.removeEventListener(K,W)},vK=(K,$)=>(B,Z)=>f(()=>{let J=m($,B,Z,`custom event "${K}" detail`);if(J===N||J===V)return;Z.dispatchEvent(new CustomEvent(K,{detail:J,bubbles:!0}))});var VK="context-request";class CK extends Event{K;$;B;constructor(K,$,B=!1){super(VK,{bubbles:!0,composed:!0});this.context=K;this.callback=$;this.subscribe=B}}var uK=(K)=>($)=>{let B=(Z)=>{let{context:J,callback:W}=Z;if(K.includes(J)&&z(W))Z.stopImmediatePropagation(),W($.getSignal(String(J)))};return $.addEventListener(VK,B),()=>$.removeEventListener(VK,B)},cK=(K,$)=>(B)=>{let Z=R(P(B,$));return B.dispatchEvent(new CK(K,(J)=>{Z=J})),Z};var yK=(K,$)=>{if($==null)return;let B=K($);return Number.isFinite(B)?B:void 0},iK=()=>(K,$)=>$!=null&&$!=="false",nK=(K=0)=>($,B)=>{if(B==null)return P($,K);let Z=B.trim();if(Z.toLowerCase().startsWith("0x"))return yK((W)=>parseInt(W,16),Z)??P($,K);let J=yK(parseFloat,B);return J!=null?Math.trunc(J):P($,K)},oK=(K=0)=>($,B)=>yK(parseFloat,B)??P($,K),sK=(K="")=>($,B)=>B??P($,K),lK=(K)=>($,B)=>{if(B==null)return K[0];let Z=B.toLowerCase();return K.find((W)=>W.toLowerCase()===Z)?B:K[0]},rK=(K)=>($,B)=>{if((B??K)==null)throw new TypeError("asJSON: Value and fallback are both null or undefined");if(B==null)return P($,K);if(B==="")throw new TypeError("Empty string is not valid JSON");let Z;try{Z=JSON.parse(B)}catch(J){throw new SyntaxError(`Failed to parse JSON: ${String(J)}`,{cause:J})}return Z??P($,K)};var aK=(K,$="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[K]+$},tK=(K,$,B,Z,J)=>{return{ok:(H)=>()=>{if(M&&K.debug)I($,`${H} ${B} of ${G($)} in ${G(K)}`);Z?.($)},err:(H)=>(Q)=>{I(Q,`Failed to ${H} ${B} of ${G($)} in ${G(K)}`,w),J?.(Q)}}},eK=(K)=>{if(/^(mailto|tel):/i.test(K))return!0;if(K.includes("://"))try{let $=new URL(K,window.location.origin);return["http:","https:","ftp:"].includes($.protocol)}catch{return!1}return!0},K$=(K,$,B)=>{if(/^on/i.test($))throw new Error(`Unsafe attribute: ${$}`);if(B=String(B).trim(),!eK(B))throw new Error(`Unsafe URL for ${$}: ${B}`);K.setAttribute($,B)},T=(K,$)=>(B,Z)=>{let{op:J,name:W="",read:A,update:H}=$,Q=A(Z),L=aK(J,W);if(U(K)&&U(Q)&&B[K]===N)B.attributeChangedCallback(K,null,Q);let{ok:j,err:X}=tK(B,Z,L,$.resolve,$.reject);return f(()=>{let Y=Symbol(W?`${J}:${W}`:J),O=m(K,B,Z,L),_=O===N?Q:O===V?$.delete?null:Q:O;if($.delete&&_===null)k(()=>{return $.delete(Z),!0},Y).then(j("Deleted")).catch(X("delete"));else if(_!=null){let y=A(Z);if(Object.is(_,y))return;k(()=>{return H(Z,_),!0},Y).then(j("Updated")).catch(X("update"))}})},$$=(K,$)=>(B,Z)=>{let J=(A)=>()=>{if(M&&B.debug)I(Z,`${A} element in ${G(Z)} in ${G(B)}`);if(z($?.resolve))$.resolve(Z);else{let H=D(K)?K:U(K)?B.getSignal(K):void 0;if(F(H))H.set(0)}},W=(A)=>(H)=>{I(H,`Failed to ${A} element in ${G(Z)} in ${G(B)}`,w),$?.reject?.(H)};return f(()=>{let A=Symbol("i"),H=Symbol("r"),Q=m(K,B,Z,"insertion or deletion"),L=Q===N?0:Q;if(L>0){if(!$)throw new TypeError("No inserter provided");k(()=>{for(let j=0;j<L;j++){let X=$.create(Z);if(!X)continue;Z.insertAdjacentElement($.position??"beforeend",X)}return!0},A).then(J("Inserted")).catch(W("insert"))}else if(L<0)k(()=>{if($&&($.position==="afterbegin"||$.position==="beforeend"))for(let j=0;j>L;j--)if($.position==="afterbegin")Z.firstElementChild?.remove();else Z.lastElementChild?.remove();else Z.remove();return!0},H).then(J("Removed")).catch(W("remove"))})},B$=(K)=>T(K,{op:"t",read:($)=>$.textContent,update:($,B)=>{Array.from($.childNodes).filter((Z)=>Z.nodeType!==Node.COMMENT_NODE).forEach((Z)=>Z.remove()),$.append(document.createTextNode(B))}}),Z$=(K,$=K)=>T($,{op:"p",name:K,read:(B)=>(K in B)?B[K]:V,update:(B,Z)=>{B[K]=Z}}),J$=(K)=>T(K,{op:"p",name:"hidden",read:($)=>!$.hidden,update:($,B)=>{$.hidden=!B}});var W$=(K,$=K)=>T($,{op:"a",name:K,read:(B)=>B.getAttribute(K),update:(B,Z)=>{K$(B,K,Z)},delete:(B)=>{B.removeAttribute(K)}}),A$=(K,$=K)=>T($,{op:"a",name:K,read:(B)=>B.hasAttribute(K),update:(B,Z)=>{B.toggleAttribute(K,Z)}}),H$=(K,$=K)=>T($,{op:"c",name:K,read:(B)=>B.classList.contains(K),update:(B,Z)=>{B.classList.toggle(K,Z)}}),Q$=(K,$=K)=>T($,{op:"s",name:K,read:(B)=>B.style.getPropertyValue(K),update:(B,Z)=>{B.style.setProperty(K,Z)},delete:(B)=>{B.style.removeProperty(K)}}),X$=(K,$={})=>T(K,{op:"h",read:(B)=>(B.shadowRoot||!$.shadowRootMode?B:null)?.innerHTML??"",update:(B,Z)=>{let{shadowRootMode:J,allowScripts:W}=$;if(!Z){if(B.shadowRoot)B.shadowRoot.innerHTML="<slot></slot>";return""}if(J&&!B.shadowRoot)B.attachShadow({mode:J});let A=B.shadowRoot||B;if(A.innerHTML=Z,!W)return"";return A.querySelectorAll("script").forEach((H)=>{let Q=document.createElement("script");Q.appendChild(document.createTextNode(H.textContent??"")),A.appendChild(Q),H.remove()})," with scripts"}}),Y$=(K)=>($,B)=>{if(!i(K))throw new TypeError("Reactives must be an object of passed signals");if(!n(B))throw new TypeError(`Target ${G(B)} is not a custom element`);customElements.whenDefined(B.localName).then(()=>{if(!MK(B,"setSignal"))throw new TypeError(`Target ${G(B)} is not a UIElement component`);for(let[Z,J]of Object.entries(K))B.setSignal(Z,U(J)?$.getSignal(J):R(J))}).catch((Z)=>{throw new Error(`Failed to pass signals to ${G(B)}`,{cause:Z})})};var IK=()=>(K)=>K.textContent?.trim(),G$=(K)=>($)=>$[K],L$=(K)=>($)=>$.hasAttribute(K),PK=(K)=>($)=>$.getAttribute(K),j$=(K)=>($)=>$.classList.contains(K),z$=(K)=>($)=>window.getComputedStyle($).getPropertyValue(K),V$=(K)=>ZK("",{".label":IK(),[K]:PK("aria-label")}),y$=(K)=>ZK("",{".description":IK(),[K]:PK("aria-describedby")});export{h as useElement,EK as useComponent,T as updateElement,H$ as toggleClass,A$ as toggleAttribute,R as toSignal,KK as state,J$ as show,B$ as setText,Q$ as setStyle,Z$ as setProperty,W$ as setAttribute,m as resolveReactive,kK as reduced,bK as read,uK as provideContexts,Y$ as pass,mK as on,I as log,F as isState,D as isSignal,s as isParser,g as isComputed,$$ as insertOrRemoveElement,j$ as hasClass,L$ as hasAttribute,IK as getText,z$ as getStyle,G$ as getProperty,V$ as getLabel,P as getFallback,y$ as getDescription,PK as getAttribute,_K as fromSelector,hK as fromEvents,ZK as fromDOM,cK as fromContext,k as enqueue,vK as emitEvent,f as effect,X$ as dangerouslySetInnerHTML,E as computed,dK as component,e as batch,sK as asString,oK as asNumber,rK as asJSON,nK as asInteger,lK as asEnum,iK as asBoolean,V as UNSET,xK as LOG_WARN,RK as LOG_INFO,w as LOG_ERROR,FK as LOG_DEBUG};

//# debugId=C46FBBFE070646CC64756E2164756E21
