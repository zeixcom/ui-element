var z=($)=>typeof $==="function",p=($,Z)=>Object.prototype.toString.call($)===`[object ${Z}]`,h=($)=>$ instanceof Error?$:Error(String($));class E extends Error{constructor($){super(`Circular dependency in ${$} detected`);return this}}var S,v=new Set,s=0,l=new Map,c,J$=()=>{c=void 0;let $=Array.from(l.values());l.clear();for(let Z of $)Z()},F$=()=>{if(c)cancelAnimationFrame(c);c=requestAnimationFrame(J$)};queueMicrotask(J$);var m=($)=>{let Z=new Set,B=$;return B.off=(W)=>{Z.add(W)},B.cleanup=()=>{for(let W of Z)W();Z.clear()},B},U=($)=>{if(S&&!$.has(S)){let Z=S;$.add(Z),S.off(()=>{$.delete(Z)})}},y=($)=>{for(let Z of $)if(s)v.add(Z);else Z()},u=()=>{while(v.size){let $=Array.from(v);v.clear();for(let Z of $)Z()}},K$=($)=>{s++;try{$()}finally{u(),s--}},g=($,Z)=>{let B=S;S=Z;try{$()}finally{S=B}},k=($,Z)=>new Promise((B,W)=>{l.set(Z||Symbol(),()=>{try{B($())}catch(H){W(H)}}),F$()});var r="State",i=($)=>{let Z=new Set,B=$,W={[Symbol.toStringTag]:r,get:()=>{return U(Z),B},set:(H)=>{if(Object.is(B,H))return;if(B=H,y(Z),j===B)Z.clear()},update:(H)=>{W.set(H(B))}};return W},M=($)=>p($,r);var b="Computed",o=($)=>{let Z=new Set,B=j,W,H,J=!0,K=!1,I=!1,Q=(A)=>{if(!Object.is(A,B))B=A,K=!0;W=void 0,J=!1},X=()=>{K=j!==B,B=j,W=void 0},Y=(A)=>{let V=h(A);K=!W||V.name!==W.name||V.message!==W.message,B=j,W=V},x=(A)=>(V)=>{if(I=!1,H=void 0,A(V),K)y(Z)},q=m(()=>{if(J=!0,H?.abort("Aborted because source signal changed"),Z.size)y(Z);else q.cleanup()}),T=()=>g(()=>{if(I)throw new E("computed");if(K=!1,z($)&&$.constructor.name==="AsyncFunction"){if(H)return B;H=new AbortController,H.signal.addEventListener("abort",()=>{I=!1,H=void 0,T()},{once:!0})}let A;I=!0;try{A=H?$(H.signal):$()}catch(V){if(V instanceof DOMException&&V.name==="AbortError")X();else Y(V);I=!1;return}if(A instanceof Promise)A.then(x(Q),x(Y));else if(A==null||j===A)X();else Q(A);I=!1},q);return{[Symbol.toStringTag]:b,get:()=>{if(U(Z),u(),J)T();if(W)throw W;return B}}},f=($)=>p($,b),t=($)=>z($)&&$.length<2;var j=Symbol(),O=($)=>M($)||f($),R=($)=>O($)?$:t($)?o($):i($);function d($){let{signals:Z,ok:B,err:W=console.error,nil:H=()=>{}}=z($)?{signals:[],ok:$}:$,J=!1,K=m(()=>g(()=>{if(J)throw new E("effect");J=!0;let I=[],Q=!1,X=Z.map((x)=>{try{let q=x.get();if(q===j)Q=!0;return q}catch(q){return I.push(h(q)),j}}),Y=void 0;try{Y=Q?H():I.length?W(...I):B(...X)}catch(x){Y=W(h(x))}finally{if(z(Y))K.off(Y)}J=!1},K));return K(),()=>K.cleanup()}var C=!1,I$="debug",x$="info",X$="warn",_="error",L$=($)=>$?`#${$}`:"",C$=($)=>$.length?`.${Array.from($).join(".")}`:"",a=($)=>!!$&&typeof $==="object",D=($)=>typeof $==="string";var Q$=($)=>$.nodeType===Node.ELEMENT_NODE,G=($)=>`<${$.localName}${L$($.id)}${C$($.classList)}>`,N=($)=>D($)?`"${$}"`:a($)?JSON.stringify($):String($),n=($)=>{if($===null)return"null";if(typeof $!=="object")return typeof $;if(Array.isArray($))return"Array";if(Symbol.toStringTag in Object($))return $[Symbol.toStringTag];return $.constructor?.name||"Object"},F=($,Z,B=I$)=>{if(C||[_,X$].includes(B))console[B](Z,$);return $};class Y$ extends Error{constructor($){super($);this.name="CircularMutationError"}}var V$=($)=>{let Z=$.localName;if(!Z.includes("-"))return!0;let B=customElements.get(Z);return!!B&&$ instanceof B},y$=($)=>{let Z=new Set;if($.includes("."))Z.add("class");if($.includes("#"))Z.add("id");if($.includes("[")){let B=$.split("[");for(let W=1;W<B.length;W++){let H=B[W];if(!H.includes("]"))continue;let J=H.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(J)Z.add(J)}}return[...Z]},M$=($,Z)=>{if($.length!==Z.length)return!1;let B=new Set($);for(let W of Z)if(!B.has(W))return!1;return!0},e=($,Z,B)=>{let W=new MutationObserver(B),H=y$(Z),J={childList:!0,subtree:!0};if(H.length)J.attributes=!0,J.attributeFilter=H;return W.observe($,J),W},$$=($,Z)=>{let B=new Set,W=()=>Array.from($.querySelectorAll(Z)),H=j,J,K=0,I=2,Q=()=>{H=W(),J=e($,Z,()=>{if(!B.size){J?.disconnect(),J=void 0;return}if(K++,K>I)throw J?.disconnect(),J=void 0,K=0,new Y$("Circular mutation in element selection detected");try{let X=W();if(!M$(H,X))H=X,y(B)}finally{K--}})};return{[Symbol.toStringTag]:b,get:()=>{if(U(B),!B.size)H=W();else if(!J)Q();return H}}},P$=($)=>(Z)=>$$(Z,$),U$=($,Z,B)=>(W)=>()=>$$(W,$).get().reduce(Z,B),O$=($,Z,B=!1)=>(W,H=W)=>{if(!z(Z))throw new TypeError(`Invalid event listener provided for "${$} event on element ${G(H)}`);return H.addEventListener($,Z,B),()=>H.removeEventListener($,Z)},G$=($,Z,B,W,H,J=!1)=>{let K=new Set,I=H,Q,X,Y=()=>{Q=(x)=>{let q=W($,Z,x,I);if(!Object.is(q,I)){if(I=q,K.size>0)y(K);else if(X)X()}},Z.addEventListener(B,Q,J),X=()=>{if(Q)Z.removeEventListener(B,Q),Q=void 0;X=void 0}};return{[Symbol.toStringTag]:b,get:()=>{if(U(K),K.size&&!Q)Y();return I}}},R$=($,Z,B,W)=>(H)=>{let J=H.querySelector($);if(!J)throw new Error(`Element not found for selector "${$}" in ${G(H)}`);let K=z(W)?W(H,J):W;return G$(H,J,Z,B,K)},_$=($)=>(Z,B)=>{let W=z($)?$(B):$;if(!a(W))throw new TypeError("Passed signals must be an object or a provider function");customElements.whenDefined(B.localName).then(()=>{for(let[H,J]of Object.entries(W))B.setSignal(H,D(J)?Z.getSignal(H):R(J))}).catch((H)=>{throw new Error(`Failed to pass signals to ${G(B)}`,{cause:H})})},z$=($,Z,B)=>()=>{if(!$||!V$($))return B;let W=Z in $?$[Z]:B;return W==null||W===j?B:W},D$=($,Z,B)=>(W)=>z$(W.querySelector($),Z,B);var w=Symbol(),N$=new Set(["constructor","prototype"]),w$=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),B$=($)=>z($)&&$.length>=2,j$=($)=>{if(N$.has($))return`Property name "${$}" is a reserved word`;if(w$.has($))return`Property name "${$}" conflicts with inherited HTMLElement property`;return null},W$=($,Z,B=Z)=>{let W=$.filter(z).map((H)=>H(Z,B));return()=>{W.filter(z).forEach((H)=>H()),W.length=0}},T$=()=>({first:($,...Z)=>(B)=>{let W=(B.shadowRoot||B).querySelector($);if(W)W$(Z,B,W)},all:($,...Z)=>(B)=>{let W=new Map,H=B.shadowRoot||B,J=(X)=>{if(!W.has(X))W.set(X,W$(Z,B,X))},K=(X)=>{let Y=W.get(X);if(z(Y))Y();W.delete(X)},I=(X)=>(Y)=>{if(Q$(Y)){if(Y.matches($))X(Y);Y.querySelectorAll($).forEach(X)}},Q=e(H,$,(X)=>{for(let Y of X)Y.addedNodes.forEach(I(J)),Y.removedNodes.forEach(I(K))});return H.querySelectorAll($).forEach(J),()=>{Q.disconnect(),W.forEach((X)=>X()),W.clear()}}}),S$=($,Z={},B)=>{for(let W of Object.keys(Z)){let H=j$(W);if(H)throw new TypeError(`${H} in component "${$}".`)}customElements.define($,class extends HTMLElement{debug;#$={};#B;static observedAttributes=Object.entries(Z)?.filter(([,W])=>B$(W)).map(([W])=>W)??[];static isComponent(W){return#$ in W}constructor(){super();for(let[W,H]of Object.entries(Z)){if(H==null)continue;let J=B$(H)?H(this,null):z(H)?H(this):H;if(J!=null)this.setSignal(W,R(J))}}connectedCallback(){if(C){if(this.debug=this.hasAttribute("debug"),this.debug)F(this,"Connected")}let W=B(this,T$());if(!Array.isArray(W))throw new TypeError(`Expected array of functions as return value of setup function in ${G(this)}`);this.#B=W$(W,this)}disconnectedCallback(){if(z(this.#B))this.#B();if(C&&this.debug)F(this,"Disconnected")}attributeChangedCallback(W,H,J){if(J===H||f(this.#$[W]))return;let K=Z[W];if(!B$(K))return;let I=K(this,J,H);if(C&&this.debug)F(J,`Attribute "${W}" of ${G(this)} changed from ${N(H)} to ${N(J)}, parsed as <${n(I)}> ${N(I)}`);this[W]=I}getSignal(W){let H=this.#$[W];if(C&&this.debug)F(H,`Get ${n(H)} "${String(W)}" in ${G(this)}`);return H}setSignal(W,H){let J=j$(String(W));if(J)throw new TypeError(`${J} on ${G(this)}.`);if(!O(H))throw new TypeError(`Expected signal as value for property "${String(W)}" on ${G(this)}.`);let K=this.#$[W],I=M(H);if(this.#$[W]=H,Object.defineProperty(this,W,{get:H.get,set:I?H.set:void 0,enumerable:!0,configurable:I}),K&&M(K))K.set(j);if(C&&this.debug)F(H,`Set ${n(H)} "${String(W)} in ${G(this)}`)}})};var Z$="context-request";class A$ extends Event{$;Z;B;constructor($,Z,B=!1){super(Z$,{bubbles:!0,composed:!0});this.context=$;this.callback=Z;this.subscribe=B}}var k$=($)=>(Z)=>{let B=(W)=>{let{context:H,callback:J}=W;if($.includes(H)&&z(J))W.stopPropagation(),J(Z.getSignal(String(H)))};return Z.addEventListener(Z$,B),()=>Z.removeEventListener(Z$,B)},E$=($,Z)=>(B)=>{let W=R(Z);return B.dispatchEvent(new A$($,(H)=>{W=H})),W};var q$=($,Z)=>{if(Z==null)return;let B=$(Z);return Number.isFinite(B)?B:void 0},b$=()=>($,Z)=>Z!=="false"&&Z!=null,f$=($=0)=>(Z,B)=>{if(B==null)return $;let W=B.trim();if(W==="")return $;if(W.toLowerCase().startsWith("0x")){let J=parseInt(W,16);return Number.isFinite(J)?J:$}let H=q$(parseFloat,B);return H!=null?Math.trunc(H):$},d$=($=0)=>(Z,B)=>q$(parseFloat,B)??$,h$=($="")=>(Z,B)=>B??$,m$=($)=>(Z,B)=>{if(B==null)return $[0];let W=B.toLowerCase();return $.find((J)=>J.toLowerCase()===W)?B:$[0]},g$=($)=>(Z,B)=>{if((B??$)==null)throw new ReferenceError("Value and fallback are both null or undefined");if(B==null)return $;if(B==="")throw new SyntaxError("Empty string is not valid JSON");let W;try{W=JSON.parse(B)}catch(H){throw new SyntaxError(`Failed to parse JSON: ${String(H)}`,{cause:H})}return W??$};var H$=($,Z,B)=>D($)?Z.getSignal($).get():O($)?$.get():z($)?$(B):w,p$=($)=>{if(/^(mailto|tel):/i.test($))return!0;if($.includes("://"))try{let Z=new URL($,window.location.origin);return["http:","https:","ftp:"].includes(Z.protocol)}catch{return!1}return!0},v$=($,Z,B)=>{if(/^on/i.test(Z))throw new Error(`Unsafe attribute: ${Z}`);if(B=String(B).trim(),!p$(B))throw new Error(`Unsafe URL for ${Z}: ${B}`);$.setAttribute(Z,B)},P=($,Z)=>(B,W)=>{let{op:H,name:J="",read:K,update:I}=Z,Q=K(W),X={a:"attribute ",c:"class ",h:"inner HTML",p:"property ",s:"style property ",t:"text content"};if(D($)&&D(Q)&&B[$]===w)B.attributeChangedCallback($,null,Q);let Y=(q)=>()=>{if(C&&B.debug)F(W,`${q} ${X[H]+J} of ${G(W)} in ${G(B)}`);Z.resolve?.(W)},x=(q)=>(T)=>{F(T,`Failed to ${q} ${X[H]+J} of ${G(W)} in ${G(B)}`,_),Z.reject?.(T)};return d(()=>{let q=Symbol(`${H}:${J}`),T=Symbol(`${H}-${J}`),L=w;try{L=H$($,B,W)}catch(A){F(A,`Failed to resolve value of ${N($)} for ${X[H]+J} of ${G(W)} in ${G(B)}`,_);return}if(L===w)L=Q;else if(L===j)L=Z.delete?null:Q;if(Z.delete&&L===null)k(()=>{return Z.delete(W),!0},T).then(Y("Deleted")).catch(x("delete"));else if(L!=null){let A=K(W);if(Object.is(L,A))return;k(()=>{return I(W,L),!0},q).then(Y("Updated")).catch(x("update"))}})},c$=($,Z)=>(B,W)=>{let H=(K)=>()=>{if(C&&B.debug)F(W,`${K} element in ${G(W)} in ${G(B)}`);if(z(Z?.resolve))Z.resolve(W);else{let I=O($)?$:D($)?B.getSignal($):void 0;if(M(I))I.set(0)}},J=(K)=>(I)=>{F(I,`Failed to ${K} element in ${G(W)} in ${G(B)}`,_),Z?.reject?.(I)};return d(()=>{let K=Symbol("i"),I=Symbol("d"),Q=0;try{Q=H$($,B,W)}catch(X){F(X,`Failed to resolve value of ${N($)} for insertion or deletion in ${G(W)} in ${G(B)}`,_);return}if(Q===w)Q=0;if(Q>0){if(!Z)throw new TypeError("No inserter provided");k(()=>{for(let X=0;X<Q;X++){let Y=Z.create(W);if(!Y)continue;W.insertAdjacentElement(Z.position??"beforeend",Y)}return!0},K).then(H("Inserted")).catch(J("insert"))}else if(Q<0)k(()=>{if(Z&&(Z.position==="afterbegin"||Z.position==="beforeend"))for(let X=0;X>Q;X--)if(Z.position==="afterbegin")W.firstElementChild?.remove();else W.lastElementChild?.remove();else W.remove();return!0},I).then(H("Removed")).catch(J("remove"))})},u$=($)=>P($,{op:"t",read:(Z)=>Z.textContent,update:(Z,B)=>{Array.from(Z.childNodes).filter((W)=>W.nodeType!==Node.COMMENT_NODE).forEach((W)=>W.remove()),Z.append(document.createTextNode(B))}}),i$=($,Z=$)=>P(Z,{op:"p",name:String($),read:(B)=>($ in B)?B[$]:j,update:(B,W)=>{B[$]=W}}),o$=($)=>P($,{op:"p",name:"hidden",read:(Z)=>!Z.hidden,update:(Z,B)=>{Z.hidden=!B}}),n$=($,Z=$)=>P(Z,{op:"a",name:$,read:(B)=>B.getAttribute($),update:(B,W)=>{v$(B,$,W)},delete:(B)=>{B.removeAttribute($)}}),s$=($,Z=$)=>P(Z,{op:"a",name:$,read:(B)=>B.hasAttribute($),update:(B,W)=>{B.toggleAttribute($,W)}}),l$=($,Z=$)=>P(Z,{op:"c",name:$,read:(B)=>B.classList.contains($),update:(B,W)=>{B.classList.toggle($,W)}}),r$=($,Z=$)=>P(Z,{op:"s",name:$,read:(B)=>B.style.getPropertyValue($),update:(B,W)=>{B.style.setProperty($,W)},delete:(B)=>{B.style.removeProperty($)}}),t$=($,Z={})=>P($,{op:"h",read:(B)=>(B.shadowRoot||!Z.shadowRootMode?B:null)?.innerHTML??"",update:(B,W)=>{let{shadowRootMode:H,allowScripts:J}=Z;if(!W){if(B.shadowRoot)B.shadowRoot.innerHTML="<slot></slot>";return""}if(H&&!B.shadowRoot)B.attachShadow({mode:H});let K=B.shadowRoot||B;if(K.innerHTML=W,!J)return"";return K.querySelectorAll("script").forEach((I)=>{let Q=document.createElement("script");Q.appendChild(document.createTextNode(I.textContent??"")),K.appendChild(Q),I.remove()})," with scripts"}}),a$=($,Z)=>(B,W=B)=>d(()=>{let H;try{H=H$(Z,B,W)}catch(J){F(J,`Failed to resolve value of ${N(Z)} for custom event detail emitted on ${G(W)} in ${G(B)}`,_);return}if(H===w||H===j)return;W.dispatchEvent(new CustomEvent($,{detail:H,bubbles:!0}))});export{P as updateElement,l$ as toggleClass,s$ as toggleAttribute,R as toSignal,i as state,o$ as show,u$ as setText,r$ as setStyle,i$ as setProperty,n$ as setAttribute,G$ as sensor,$$ as selection,z$ as read,k$ as provide,_$ as pass,O$ as on,F as log,M as isState,O as isSignal,f as isComputed,c$ as insertOrRemoveElement,P$ as fromSelector,R$ as fromEvent,U$ as fromDescendants,D$ as fromDescendant,E$ as fromContext,k as enqueue,a$ as emit,d as effect,t$ as dangerouslySetInnerHTML,o as computed,S$ as component,K$ as batch,h$ as asString,d$ as asNumber,g$ as asJSON,f$ as asInteger,m$ as asEnum,b$ as asBoolean,j as UNSET,w as RESET,X$ as LOG_WARN,x$ as LOG_INFO,_ as LOG_ERROR,I$ as LOG_DEBUG};

//# debugId=E998B753E765706764756E2164756E21
