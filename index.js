var G=(B)=>typeof B==="function",v=(B,Z)=>Object.prototype.toString.call(B)===`[object ${Z}]`,h=(B)=>B instanceof Error?B:Error(String(B));class k extends Error{constructor(B){super(`Circular dependency in ${B} detected`);return this}}var w,c=new Set,r=0,a=new Map,u,XB=()=>{u=void 0;let B=Array.from(a.values());a.clear();for(let Z of B)Z()},UB=()=>{if(u)cancelAnimationFrame(u);u=requestAnimationFrame(XB)};queueMicrotask(XB);var m=(B)=>{let Z=new Set,W=B;return W.off=($)=>{Z.add($)},W.cleanup=()=>{for(let $ of Z)$();Z.clear()},W},_=(B)=>{if(w&&!B.has(w)){let Z=w;B.add(Z),w.off(()=>{B.delete(Z)})}},P=(B)=>{for(let Z of B)if(r)c.add(Z);else Z()},i=()=>{while(c.size){let B=Array.from(c);c.clear();for(let Z of B)Z()}},YB=(B)=>{r++;try{B()}finally{i(),r--}},p=(B,Z)=>{let W=w;w=Z;try{B()}finally{w=W}},N=(B,Z)=>new Promise((W,$)=>{a.set(Z||Symbol(),()=>{try{W(B())}catch(I){$(I)}}),UB()});var t="State",o=(B)=>{let Z=new Set,W=B,$={[Symbol.toStringTag]:t,get:()=>{return _(Z),W},set:(I)=>{if(Object.is(W,I))return;if(W=I,P(Z),A===W)Z.clear()},update:(I)=>{$.set(I(W))}};return $},M=(B)=>v(B,t);var S="Computed",b=(B)=>{let Z=new Set,W=A,$,I,J=!0,K=!1,H=!1,Y=(z)=>{if(!Object.is(z,W))W=z,K=!0;$=void 0,J=!1},Q=()=>{K=A!==W,W=A,$=void 0},X=(z)=>{let V=h(z);K=!$||V.name!==$.name||V.message!==$.message,W=A,$=V},q=(z)=>(V)=>{if(H=!1,I=void 0,z(V),K)P(Z)},F=m(()=>{if(J=!0,I?.abort("Aborted because source signal changed"),Z.size)P(Z);else F.cleanup()}),U=()=>p(()=>{if(H)throw new k("computed");if(K=!1,G(B)&&B.constructor.name==="AsyncFunction"){if(I)return W;I=new AbortController,I.signal.addEventListener("abort",()=>{H=!1,I=void 0,U()},{once:!0})}let z;H=!0;try{z=I?B(I.signal):B()}catch(V){if(V instanceof DOMException&&V.name==="AbortError")Q();else X(V);H=!1;return}if(z instanceof Promise)z.then(q(Y),q(X));else if(z==null||A===z)Q();else Y(z);H=!1},F);return{[Symbol.toStringTag]:S,get:()=>{if(_(Z),i(),J)U();if($)throw $;return W}}},E=(B)=>v(B,S),e=(B)=>G(B)&&B.length<2;var A=Symbol(),O=(B)=>M(B)||E(B),D=(B)=>O(B)?B:e(B)?b(B):o(B);function f(B){let{signals:Z,ok:W,err:$=console.error,nil:I=()=>{}}=G(B)?{signals:[],ok:B}:B,J=!1,K=m(()=>p(()=>{if(J)throw new k("effect");J=!0;let H=[],Y=!1,Q=Z.map((q)=>{try{let F=q.get();if(F===A)Y=!0;return F}catch(F){return H.push(h(F)),A}}),X=void 0;try{X=Y?I():H.length?$(...H):W(...Q)}catch(q){X=$(h(q))}finally{if(G(X))K.off(X)}J=!1},K));return K(),()=>K.cleanup()}var x=!1,GB="debug",xB="info",zB="warn",g="error",yB=(B)=>B?`#${B}`:"",VB=(B)=>B?.length?`.${Array.from(B).join(".")}`:"",BB=(B)=>!!B&&typeof B==="object",T=(B)=>typeof B==="string",n=(B,Z)=>T(Z)&&(Z in B)&&G(B[Z]),AB=(B)=>B.nodeType===Node.ELEMENT_NODE,WB=(B)=>B.localName.includes("-"),jB=(B)=>{if(!WB(B))return!0;let Z=customElements.get(B.localName);return!!Z&&B instanceof Z},j=(B)=>B?`<${B.localName}${yB(B.id)}${VB(B.classList)}>`:"<unknown>",d=(B)=>T(B)?`"${B}"`:BB(B)?JSON.stringify(B):String(B),s=(B)=>{if(B===null)return"null";if(typeof B!=="object")return typeof B;if(Array.isArray(B))return"Array";if(Symbol.toStringTag in Object(B))return B[Symbol.toStringTag];return B.constructor?.name||"Object"},L=(B,Z,W=GB)=>{if(x||[g,zB].includes(W))console[W](Z,B);return B};class qB extends Error{constructor(B){super(B);this.name="CircularMutationError"}}var PB=(B)=>{let Z=new Set;if(B.includes("."))Z.add("class");if(B.includes("#"))Z.add("id");if(B.includes("[")){let W=B.split("[");for(let $=1;$<W.length;$++){let I=W[$];if(!I.includes("]"))continue;let J=I.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(J)Z.add(J)}}return[...Z]},MB=(B,Z)=>{if(B.length!==Z.length)return!1;let W=new Set(B);for(let $ of Z)if(!W.has($))return!1;return!0},_B=(B,Z,W)=>($)=>{let I=new Set,J=G(B)?B($):B,K=new Map,H,Y=()=>{for(let[Q,X]of Object.entries(W)){let q=(F)=>{let U=F.target;if(!U)return;let y=U.closest(Z);if(!y||!$.contains(y))return;F.stopPropagation();try{let z=X({event:F,host:$,target:y,value:J});if(z==null)return;if(!Object.is(z,J)){if(J=z,I.size>0)P(I);else if(H)H()}}catch(z){throw F.stopImmediatePropagation(),z}};K.set(Q,q),$.addEventListener(Q,q)}H=()=>{if(K.size){for(let[Q,X]of K)$.removeEventListener(Q,X);K.clear()}H=void 0}};return{[Symbol.toStringTag]:S,get(){if(_(I),I.size&&!K.size)Y();return J}}},ZB=(B,Z,W)=>{let $=new MutationObserver(W),I={childList:!0,subtree:!0},J=PB(Z);if(J.length)I.attributes=!0,I.attributeFilter=J;return $.observe(B,I),$},FB=(B)=>(Z)=>{let W=new Set,$=()=>Array.from(Z.querySelectorAll(B)),I=A,J,K=0,H=2,Y=()=>{I=$(),J=ZB(Z,B,()=>{if(!W.size){J?.disconnect(),J=void 0;return}if(K++,K>H)throw J?.disconnect(),J=void 0,K=0,new qB("Circular mutation in element selection detected");try{let Q=$();if(!MB(I,Q))I=Q,P(W)}finally{K--}})};return{[Symbol.toStringTag]:S,get(){if(_(W),!W.size)I=$();else if(!J)Y();return I}}},OB=(B,Z,W,$)=>b(()=>FB(Z)(B).get().reduce(W,$)),DB=(B,Z,W)=>{let $=B.querySelector(Z);return W($,$?jB($):!1)};var R=Symbol(),TB=new Set(["constructor","prototype"]),wB=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),$B=(B)=>G(B)&&B.length>=2,LB=(B)=>{if(TB.has(B))return`Property name "${B}" is a reserved word`;if(wB.has(B))return`Property name "${B}" conflicts with inherited HTMLElement property`;return null},IB=(B,Z,W=Z)=>{let $=B.filter(G).map((I)=>I(Z,W));return()=>{$.filter(G).forEach((I)=>I()),$.length=0}},NB=()=>({first:(B,...Z)=>(W)=>{let $=(W.shadowRoot||W).querySelector(B);if($)IB(Z,W,$)},all:(B,...Z)=>(W)=>{let $=new Map,I=W.shadowRoot||W,J=(Q)=>{if(!$.has(Q))$.set(Q,IB(Z,W,Q))},K=(Q)=>{let X=$.get(Q);if(G(X))X();$.delete(Q)},H=(Q)=>(X)=>{if(AB(X)){if(X.matches(B))Q(X);X.querySelectorAll(B).forEach(Q)}},Y=ZB(I,B,(Q)=>{for(let X of Q)X.addedNodes.forEach(H(J)),X.removedNodes.forEach(H(K))});return I.querySelectorAll(B).forEach(J),()=>{Y.disconnect(),$.forEach((Q)=>Q()),$.clear()}}}),RB=(B,Z={},W)=>{for(let $ of Object.keys(Z)){let I=LB($);if(I)throw new TypeError(`${I} in component "${B}".`)}customElements.define(B,class extends HTMLElement{debug;#B={};#W;static observedAttributes=Object.entries(Z)?.filter(([,$])=>$B($)).map(([$])=>$)??[];constructor(){super();for(let[$,I]of Object.entries(Z)){if(I==null)continue;let J=$B(I)?I(this,null):G(I)?I(this):I;if(J!=null)this.setSignal($,D(J))}}connectedCallback(){if(x){if(this.debug=this.hasAttribute("debug"),this.debug)L(this,"Connected")}let $=W(this,NB());if(!Array.isArray($))throw new TypeError(`Expected array of functions as return value of setup function in ${j(this)}`);this.#W=IB($,this)}disconnectedCallback(){if(G(this.#W))this.#W();if(x&&this.debug)L(this,"Disconnected")}attributeChangedCallback($,I,J){if(J===I||E(this.#B[$]))return;let K=Z[$];if(!$B(K))return;let H=K(this,J,I);if(x&&this.debug)L(J,`Attribute "${$}" of ${j(this)} changed from ${d(I)} to ${d(J)}, parsed as <${s(H)}> ${d(H)}`);this[$]=H}getSignal($){let I=this.#B[$];if(x&&this.debug)L(I,`Get ${s(I)} "${String($)}" in ${j(this)}`);return I}setSignal($,I){let J=LB(String($));if(J)throw new TypeError(`${J} on ${j(this)}.`);if(!O(I))throw new TypeError(`Expected signal as value for property "${String($)}" on ${j(this)}.`);let K=this.#B[$],H=M(I);if(this.#B[$]=I,Object.defineProperty(this,$,{get:I.get,set:H?I.set:void 0,enumerable:!0,configurable:H}),K&&M(K))K.set(A);if(x&&this.debug)L(I,`Set ${s(I)} "${String($)} in ${j(this)}`)}})};var JB="context-request";class CB extends Event{B;Z;W;constructor(B,Z,W=!1){super(JB,{bubbles:!0,composed:!0});this.context=B;this.callback=Z;this.subscribe=W}}var kB=(B)=>(Z)=>{let W=($)=>{let{context:I,callback:J}=$;if(B.includes(I)&&G(J))$.stopImmediatePropagation(),J(Z.getSignal(String(I)))};return Z.addEventListener(JB,W),()=>Z.removeEventListener(JB,W)},SB=(B,Z)=>(W)=>{let $=D(Z);return W.dispatchEvent(new CB(B,(I)=>{$=I})),$};var KB=(B,Z)=>{if(Z==null)return;let W=B(Z);return Number.isFinite(W)?W:void 0},bB=()=>(B,Z)=>Z!=null&&Z!=="false",EB=(B=0)=>(Z,W)=>{if(W==null)return B;let $=W.trim();if($.toLowerCase().startsWith("0x"))return KB((J)=>parseInt(J,16),$)??B;let I=KB(parseFloat,W);return I!=null?Math.trunc(I):B},fB=(B=0)=>(Z,W)=>KB(parseFloat,W)??B,gB=(B="")=>(Z,W)=>W??B,dB=(B)=>(Z,W)=>{if(W==null)return B[0];let $=W.toLowerCase();return B.find((J)=>J.toLowerCase()===$)?W:B[0]},hB=(B)=>(Z,W)=>{if((W??B)==null)throw new ReferenceError("Value and fallback are both null or undefined");if(W==null)return B;if(W==="")throw new SyntaxError("Empty string is not valid JSON");let $;try{$=JSON.parse(W)}catch(I){throw new SyntaxError(`Failed to parse JSON: ${String(I)}`,{cause:I})}return $??B};var l=Symbol("RESOLVE_ERROR"),QB=(B,Z,W,$)=>{try{return T(B)?Z.getSignal(B).get():O(B)?B.get():G(B)?B(W):R}catch(I){if($)L(I,`Failed to resolve value of ${d(B)}${$?` for ${$}`:""} in ${j(W)}${Z!==W?` in ${j(Z)}`:""}`,g);return l}},mB=(B,Z="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[B]+Z},pB=(B,Z,W,$,I)=>{return{ok:(H)=>()=>{if(x&&B.debug)L(Z,`${H} ${W} of ${j(Z)} in ${j(B)}`);$?.(Z)},err:(H)=>(Y)=>{L(Y,`Failed to ${H} ${W} of ${j(Z)} in ${j(B)}`,g),I?.(Y)}}},HB=(B,Z)=>{return Symbol(Z?`${B}:${Z}`:B)},vB=(B,Z,W,$,I)=>{return f(()=>{let J=QB(B,Z,W,$);if(J===l)return;I(J)})},cB=(B)=>{if(/^(mailto|tel):/i.test(B))return!0;if(B.includes("://"))try{let Z=new URL(B,window.location.origin);return["http:","https:","ftp:"].includes(Z.protocol)}catch{return!1}return!0},uB=(B,Z,W)=>{if(/^on/i.test(Z))throw new Error(`Unsafe attribute: ${Z}`);if(W=String(W).trim(),!cB(W))throw new Error(`Unsafe URL for ${Z}: ${W}`);B.setAttribute(Z,W)},C=(B,Z)=>(W,$)=>{let{op:I,name:J="",read:K,update:H}=Z,Y=K($),Q=mB(I,J);if(T(B)&&T(Y)&&W[B]===R)W.attributeChangedCallback(B,null,Y);let{ok:X,err:q}=pB(W,$,Q,Z.resolve,Z.reject);return f(()=>{let F=HB(I,J),U=QB(B,W,$,Q);if(U===l)return;let y=U===R?Y:U===A?Z.delete?null:Y:U;if(Z.delete&&y===null)N(()=>{return Z.delete($),!0},F).then(X("Deleted")).catch(q("delete"));else if(y!=null){let z=K($);if(Object.is(y,z))return;N(()=>{return H($,y),!0},F).then(X("Updated")).catch(q("update"))}})},iB=(B,Z)=>(W,$)=>{let I=(K)=>()=>{if(x&&W.debug)L($,`${K} element in ${j($)} in ${j(W)}`);if(G(Z?.resolve))Z.resolve($);else{let H=O(B)?B:T(B)?W.getSignal(B):void 0;if(M(H))H.set(0)}},J=(K)=>(H)=>{L(H,`Failed to ${K} element in ${j($)} in ${j(W)}`,g),Z?.reject?.(H)};return f(()=>{let K=HB("i"),H=HB("r"),Y=QB(B,W,$,"insertion or deletion");if(Y===l)return;let Q=Y===R?0:Y;if(Q>0){if(!Z)throw new TypeError("No inserter provided");N(()=>{for(let X=0;X<Q;X++){let q=Z.create($);if(!q)continue;$.insertAdjacentElement(Z.position??"beforeend",q)}return!0},K).then(I("Inserted")).catch(J("insert"))}else if(Q<0)N(()=>{if(Z&&(Z.position==="afterbegin"||Z.position==="beforeend"))for(let X=0;X>Q;X--)if(Z.position==="afterbegin")$.firstElementChild?.remove();else $.lastElementChild?.remove();else $.remove();return!0},H).then(I("Removed")).catch(J("remove"))})},oB=(B)=>C(B,{op:"t",read:(Z)=>Z.textContent,update:(Z,W)=>{Array.from(Z.childNodes).filter(($)=>$.nodeType!==Node.COMMENT_NODE).forEach(($)=>$.remove()),Z.append(document.createTextNode(W))}}),nB=(B,Z=B)=>C(Z,{op:"p",name:String(B),read:(W)=>(B in W)?W[B]:A,update:(W,$)=>{W[B]=$}}),sB=(B)=>C(B,{op:"p",name:"hidden",read:(Z)=>!Z.hidden,update:(Z,W)=>{Z.hidden=!W}}),lB=(B,Z,W)=>C(Z,{op:"m",name:String(B),read:()=>null,update:($,I)=>{if(I&&n($,B))if(W)$[B](...W);else $[B]()}}),rB=(B)=>C(B,{op:"m",name:"focus",read:(Z)=>Z===document.activeElement,update:(Z,W)=>{if(W&&n(Z,"focus"))Z.focus()}}),aB=(B,Z=B)=>C(Z,{op:"a",name:B,read:(W)=>W.getAttribute(B),update:(W,$)=>{uB(W,B,$)},delete:(W)=>{W.removeAttribute(B)}}),tB=(B,Z=B)=>C(Z,{op:"a",name:B,read:(W)=>W.hasAttribute(B),update:(W,$)=>{W.toggleAttribute(B,$)}}),eB=(B,Z=B)=>C(Z,{op:"c",name:B,read:(W)=>W.classList.contains(B),update:(W,$)=>{W.classList.toggle(B,$)}}),B4=(B,Z=B)=>C(Z,{op:"s",name:B,read:(W)=>W.style.getPropertyValue(B),update:(W,$)=>{W.style.setProperty(B,$)},delete:(W)=>{W.style.removeProperty(B)}}),W4=(B,Z={})=>C(B,{op:"h",read:(W)=>(W.shadowRoot||!Z.shadowRootMode?W:null)?.innerHTML??"",update:(W,$)=>{let{shadowRootMode:I,allowScripts:J}=Z;if(!$){if(W.shadowRoot)W.shadowRoot.innerHTML="<slot></slot>";return""}if(I&&!W.shadowRoot)W.attachShadow({mode:I});let K=W.shadowRoot||W;if(K.innerHTML=$,!J)return"";return K.querySelectorAll("script").forEach((H)=>{let Y=document.createElement("script");Y.appendChild(document.createTextNode(H.textContent??"")),K.appendChild(Y),H.remove()})," with scripts"}}),Z4=(B)=>(Z,W=Z)=>{let $=new Map;for(let[I,J]of Object.entries(B))$.set(I,J),W.addEventListener(I,J);return()=>{for(let[I,J]of $)W.removeEventListener(I,J);$.clear()}},$4=(B,Z)=>(W,$=W)=>vB(Z,W,$,`custom event "${B}" detail`,(I)=>{if(I===R||I===A)return;$.dispatchEvent(new CustomEvent(B,{detail:I,bubbles:!0}))}),I4=(B)=>(Z,W)=>{if(!BB(B))throw new ReferenceError("Passed signals must be an object or a provider function");if(!WB(W))return;customElements.whenDefined(W.localName).then(()=>{if(!n(W,"setSignal"))return;for(let[$,I]of Object.entries(B))W.setSignal($,T(I)?Z.getSignal(I):D(I))}).catch(($)=>{throw new Error(`Failed to pass signals to ${j(W)}`,{cause:$})})};export{C as updateElement,eB as toggleClass,tB as toggleAttribute,D as toSignal,o as state,sB as show,oB as setText,B4 as setStyle,nB as setProperty,aB as setAttribute,OB as reduced,DB as read,kB as provideContexts,I4 as pass,Z4 as on,L as log,M as isState,O as isSignal,E as isComputed,iB as insertOrRemoveElement,FB as fromSelector,_B as fromEvents,SB as fromContext,rB as focus,N as enqueue,$4 as emitEvent,f as effect,W4 as dangerouslySetInnerHTML,b as computed,RB as component,lB as callMethod,YB as batch,gB as asString,fB as asNumber,hB as asJSON,EB as asInteger,dB as asEnum,bB as asBoolean,A as UNSET,R as RESET,zB as LOG_WARN,xB as LOG_INFO,g as LOG_ERROR,GB as LOG_DEBUG};

//# debugId=FBF4244BFE4C7D9364756E2164756E21
