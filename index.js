var z=(H)=>typeof H==="function",r=(H,K)=>Object.prototype.toString.call(H)===`[object ${K}]`,v=(H)=>H instanceof Error?H:Error(String(H));class d extends Error{constructor(H){super(`Circular dependency in ${H} detected`);return this}}var k,a=new Set,YH=0,xH=new Map,t,UH=()=>{t=void 0;let H=Array.from(xH.values());xH.clear();for(let K of H)K()},RH=()=>{if(t)cancelAnimationFrame(t);t=requestAnimationFrame(UH)};queueMicrotask(UH);var c=(H)=>{let K=new Set,B=H;return B.off=($)=>{K.add($)},B.cleanup=()=>{for(let $ of K)$();K.clear()},B},R=(H)=>{if(k&&!H.has(k)){let K=k;H.add(K),k.off(()=>{H.delete(K)})}},_=(H)=>{for(let K of H)if(YH)a.add(K);else K()},e=()=>{while(a.size){let H=Array.from(a);a.clear();for(let K of H)K()}},HH=(H)=>{YH++;try{H()}finally{e(),YH--}},u=(H,K)=>{let B=k;k=K;try{H()}finally{k=B}},E=(H,K)=>new Promise((B,$)=>{xH.set(K||Symbol(),()=>{try{B(H())}catch(Z){$(Z)}}),RH()});var GH="State",KH=(H)=>{let K=new Set,B=H,$={[Symbol.toStringTag]:GH,get:()=>{return R(K),B},set:(Z)=>{if(Object.is(B,Z))return;if(B=Z,_(K),j===B)K.clear()},update:(Z)=>{$.set(Z(B))}};return $},M=(H)=>r(H,GH);var b="Computed",BH=(H)=>{let K=new Set,B=j,$,Z,W=!0,Q=!1,J=!1,A=(G)=>{if(!Object.is(G,B))B=G,Q=!0;$=void 0,W=!1},L=()=>{Q=j!==B,B=j,$=void 0},X=(G)=>{let y=v(G);Q=!$||y.name!==$.name||y.message!==$.message,B=j,$=y},Y=(G)=>(y)=>{if(J=!1,Z=void 0,G(y),Q)_(K)},V=c(()=>{if(W=!0,Z?.abort("Aborted because source signal changed"),K.size)_(K);else V.cleanup()}),C=()=>u(()=>{if(J)throw new d("computed");if(Q=!1,z(H)&&H.constructor.name==="AsyncFunction"){if(Z)return B;Z=new AbortController,Z.signal.addEventListener("abort",()=>{J=!1,Z=void 0,C()},{once:!0})}let G;J=!0;try{G=Z?H(Z.signal):H()}catch(y){if(y instanceof DOMException&&y.name==="AbortError")L();else X(y);J=!1;return}if(G instanceof Promise)G.then(Y(A),Y(X));else if(G==null||j===G)L();else A(G);J=!1},V);return{[Symbol.toStringTag]:b,get:()=>{if(R(K),e(),W)C();if($)throw $;return B}}},g=(H)=>r(H,b),yH=(H)=>z(H)&&H.length<2;var j=Symbol(),T=(H)=>M(H)||g(H),D=(H)=>T(H)?H:yH(H)?BH(H):KH(H);function f(H){let{signals:K,ok:B,err:$=console.error,nil:Z=()=>{}}=z(H)?{signals:[],ok:H}:H,W=!1,Q=c(()=>u(()=>{if(W)throw new d("effect");W=!0;let J=[],A=!1,L=K.map((Y)=>{try{let V=Y.get();if(V===j)A=!0;return V}catch(V){return J.push(v(V)),j}}),X=void 0;try{X=A?Z():J.length?$(...J):B(...L)}catch(Y){X=$(v(Y))}finally{if(z(X))Q.off(X)}W=!1},Q));return Q(),()=>Q.cleanup()}var q=!1,PH="debug",TH="info",$H="warn",w="error",DH=(H)=>H?`#${H}`:"",wH=(H)=>H?.length?`.${Array.from(H).join(".")}`:"",i=(H)=>!!H&&typeof H==="object",O=(H)=>typeof H==="string",FH=(H,K)=>O(K)&&(K in H)&&z(H[K]),CH=(H)=>H.nodeType===Node.ELEMENT_NODE,o=(H)=>H.localName.includes("-");var x=(H)=>H?`<${H.localName}${DH(H.id)}${wH(H.classList)}>`:"<unknown>",p=(H)=>O(H)?`"${H}"`:i(H)?JSON.stringify(H):String(H),ZH=(H)=>{if(H===null)return"null";if(typeof H!=="object")return typeof H;if(Array.isArray(H))return"Array";if(Symbol.toStringTag in Object(H))return H[Symbol.toStringTag];return H.constructor?.name||"Object"},I=(H,K,B=PH)=>{if(q||[w,$H].includes(B))console[B](K,H);return H};class WH extends Error{constructor(H,K){super(`Circular dependency detected in selection signal for component ${x(H)} with selector "${K}"`);this.name="CircularMutationError"}}class JH extends Error{constructor(H){super(`Invalid component name "${H}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class n extends Error{constructor(H,K,B){super(`Invalid property name "${K}" for component <${H}>. ${B}`);this.name="InvalidPropertyNameError"}}class LH extends Error{constructor(H,K){super(`Invalid effects in component <${x(H)}>. Effects must be an array of effects, a single effect function, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",K)this.cause=K}}class QH extends Error{constructor(H,K){super(`Expected signal as value for property "${String(K)}" in component ${x(H)}.`);this.name="InvalidSignalError"}}class s extends Error{constructor(H,K,B){super(`Missing required element <${K}> in component ${x(H)}. ${B}`);this.name="MissingElementError"}}class AH extends Error{constructor(H,K){super(`Timeout waiting for: [${K.join(", ")}] in component ${x(H)}.`);this.name="DependencyTimeoutError"}}var N=Symbol("RESET"),h=(H,K,B=K)=>{try{if(H instanceof Promise)throw H;if(!Array.isArray(H))return H(K,B);let $=H.filter(z).map((Z)=>Z(K,B));return()=>{$.filter(z).forEach((Z)=>Z()),$.length=0}}catch($){if($ instanceof Promise)$.then(()=>h(H,K,B));else throw new LH(K,$ instanceof Error?$:new Error(String($)))}},m=(H,K,B,$)=>{try{return O(H)?K.getSignal(H).get():T(H)?H.get():z(H)?H(B):N}catch(Z){if($)I(Z,`Failed to resolve value of ${p(H)}${$?` for ${$}`:""} in ${x(B)}${K!==B?` in ${x(K)}`:""}`,w);return N}};var NH=(H)=>{let K=new Set;if(H.includes("."))K.add("class");if(H.includes("#"))K.add("id");if(H.includes("[")){let B=H.split("[");for(let $=1;$<B.length;$++){let Z=B[$];if(!Z.includes("]"))continue;let W=Z.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(W)K.add(W)}}return[...K]},SH=(H,K)=>{if(H.length!==K.length)return!1;let B=new Set(H);for(let $ of K)if(!B.has($))return!1;return!0},l=(H)=>z(H)&&H.length>=2,U=(H,K)=>z(K)?K(H):K,XH=(H,K)=>(B)=>{let $=B.shadowRoot??B,Z=(Q,J)=>{let A=$.querySelector(Q);if(!A)return;let L=J(A);if(L!=null)return L},W=void 0;for(let[Q,J]of Object.entries(K))if(W=Z(Q,J),W!=null)break;return O(W)&&l(H)?H(B,W):W??U(B,H)},MH=(H,K,B)=>{let $=new MutationObserver(B),Z={childList:!0,subtree:!0},W=NH(K);if(W.length)Z.attributes=!0,Z.attributeFilter=W;return $.observe(H,Z),$},qH=(H)=>{let K=H.shadowRoot??H,B=new Set;function $(J,A){let L=K.querySelector(J);if(A!=null&&!L)throw new s(H,J,A);if(L&&o(L))B.add(L.localName);return L}function Z(J,A){let L=K.querySelectorAll(J);if(A!=null&&!L.length)throw new s(H,J,A);if(L.length)L.forEach((X)=>{if(o(X))B.add(X.localName)});return L}return[{useElement:$,useElements:Z,first:(J,A,L)=>{let X=L!=null?$(J,L):$(J);return()=>{if(X)return h(A,H,X)}},all:(J,A,L)=>{let X=L!=null?Z(J,L):Z(J);return()=>{let Y=new Map,V=(y)=>{let P=h(A,H,y);if(P&&!Y.has(y))Y.set(y,P)},C=(y)=>{let P=Y.get(y);if(P)P();Y.delete(y)},F=(y)=>(P)=>{if(CH(P)){if(P.matches(J))y(P);P.querySelectorAll(J).forEach(y)}},G=MH(K,J,(y)=>{for(let P of y)P.addedNodes.forEach(F(V)),P.removedNodes.forEach(F(C))});if(X.length)X.forEach(V);return()=>{G.disconnect(),Y.forEach((y)=>y()),Y.clear()}}}},()=>Array.from(B)]};function kH(H){return(K)=>{let B=new Set,$=()=>Array.from((K.shadowRoot??K).querySelectorAll(H)),Z=j,W,Q=0,J=2,A=()=>{Z=$(),W=MH(K,H,()=>{if(!B.size){W?.disconnect(),W=void 0;return}if(Q++,Q>J)throw W?.disconnect(),W=void 0,Q=0,new WH(K,H);try{let L=$();if(!SH(Z,L))Z=L,_(B)}finally{Q--}})};return{[Symbol.toStringTag]:b,get(){if(R(B),!B.size)Z=$();else if(!W)A();return Z}}}}var EH=50,bH=new Set(["constructor","prototype"]),fH=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),OH=(H)=>{if(bH.has(H))return`Property name "${H}" is a reserved word`;if(fH.has(H))return`Property name "${H}" conflicts with inherited HTMLElement property`;return null};function dH(H,K={},B){if(!H.includes("-")||!H.match(/^[a-z][a-z0-9-]*$/))throw new JH(H);for(let Z of Object.keys(K)){let W=OH(Z);if(W)throw new n(H,Z,W)}class $ extends HTMLElement{debug;#H={};#K;static observedAttributes=Object.entries(K)?.filter(([,Z])=>l(Z)).map(([Z])=>Z)??[];connectedCallback(){if(q){if(this.debug=this.hasAttribute("debug"),this.debug)I(this,"Connected")}for(let[L,X]of Object.entries(K)){if(X==null||L in this)continue;let Y=z(X)?X(this,null):X;if(Y!=null)this.setSignal(L,D(Y))}let[Z,W]=qH(this),Q=B(this,Z),J=W(),A=()=>{let L=h(Q,this);if(L)this.#K=L};if(J.length)Promise.race([Promise.all(J.map((L)=>customElements.whenDefined(L))),new Promise((L,X)=>{setTimeout(()=>{X(new AH(this,J.filter((Y)=>!customElements.get(Y))))},EH)})]).then(A).catch((L)=>{if(q)I(L,`Error during setup of <${H}>. Trying to run effects anyway.`,$H);A()});else A()}disconnectedCallback(){if(z(this.#K))this.#K();if(q&&this.debug)I(this,"Disconnected")}attributeChangedCallback(Z,W,Q){if(Q===W||g(this.#H[Z]))return;let J=K[Z];if(!l(J))return;let A=J(this,Q,W);if(q&&this.debug)I(Q,`Attribute "${String(Z)}" of ${x(this)} changed from ${p(W)} to ${p(Q)}, parsed as <${ZH(A)}> ${p(A)}`);if(Z in this)this[Z]=A;else this.setSignal(Z,D(A))}getSignal(Z){let W=this.#H[Z];if(q&&this.debug)I(W,`Get ${ZH(W)} "${String(Z)}" in ${x(this)}`);return W}setSignal(Z,W){let Q=OH(String(Z));if(Q)throw new n(this.localName,Z,Q);if(!T(W))throw new QH(this,Z);let J=this.#H[Z],A=M(W);if(this.#H[Z]=W,Object.defineProperty(this,Z,{get:W.get,set:A?W.set:void 0,enumerable:!0,configurable:A}),J&&M(J))J.set(j);if(q&&this.debug)I(W,`Set ${ZH(W)} "${String(Z)} in ${x(this)}`)}}customElements.define(H,$)}var gH=(H,K,B)=>($)=>{let Z=new Set,W=U($,H),Q=new Map,J,A=()=>{for(let[L,X]of Object.entries(B)){let Y=(V)=>{let C=V.target;if(!C)return;let F=C.closest(K);if(!F||!$.contains(F))return;V.stopPropagation();try{let G=X({event:V,host:$,target:F,value:W});if(G==null)return;if(!Object.is(G,W)){if(W=G,Z.size>0)_(Z);else if(J)J()}}catch(G){throw V.stopImmediatePropagation(),G}};Q.set(L,Y),$.addEventListener(L,Y)}J=()=>{if(Q.size){for(let[L,X]of Q)$.removeEventListener(L,X);Q.clear()}J=void 0}};return{[Symbol.toStringTag]:b,get(){if(R(Z),Z.size&&!Q.size)A();return W}}},pH=(H,K,B=!1)=>($,Z)=>{let W=(Q)=>{let J=K({host:$,target:Z,event:Q});if(!i(J))return;HH(()=>{for(let[A,L]of Object.entries(J)){let X=$.getSignal(A);if(M(X))X.set(L);else I(L,`Reactive property "${A}" on ${x($)} from event ${H} on ${x(Z)} could not be set, because it is read-only.`,w)}})};return Z.addEventListener(H,W,B),()=>Z.removeEventListener(H,W)},hH=(H,K)=>(B,$)=>f(()=>{let Z=m(K,B,$,`custom event "${H}" detail`);if(Z===N||Z===j)return;$.dispatchEvent(new CustomEvent(H,{detail:Z,bubbles:!0}))});var zH="context-request";class _H extends Event{H;K;B;constructor(H,K,B=!1){super(zH,{bubbles:!0,composed:!0});this.context=H;this.callback=K;this.subscribe=B}}var mH=(H)=>(K)=>{let B=($)=>{let{context:Z,callback:W}=$;if(H.includes(Z)&&z(W))$.stopImmediatePropagation(),W(K.getSignal(String(Z)))};return K.addEventListener(zH,B),()=>K.removeEventListener(zH,B)},vH=(H,K)=>(B)=>{let $=D(U(B,K));return B.dispatchEvent(new _H(H,(Z)=>{$=Z})),$};var jH=(H,K)=>{if(K==null)return;let B=H(K);return Number.isFinite(B)?B:void 0},cH=()=>(H,K)=>K!=null&&K!=="false",uH=(H=0)=>(K,B)=>{if(B==null)return U(K,H);let $=B.trim();if($.toLowerCase().startsWith("0x"))return jH((W)=>parseInt(W,16),$)??U(K,H);let Z=jH(parseFloat,B);return Z!=null?Math.trunc(Z):U(K,H)},iH=(H=0)=>(K,B)=>jH(parseFloat,B)??U(K,H),oH=(H="")=>(K,B)=>B??U(K,H),nH=(H)=>(K,B)=>{if(B==null)return H[0];let $=B.toLowerCase();return H.find((W)=>W.toLowerCase()===$)?B:H[0]},sH=(H)=>(K,B)=>{if((B??H)==null)throw new TypeError("asJSON: Value and fallback are both null or undefined");if(B==null)return U(K,H);if(B==="")throw new TypeError("Empty string is not valid JSON");let $;try{$=JSON.parse(B)}catch(Z){throw new SyntaxError(`Failed to parse JSON: ${String(Z)}`,{cause:Z})}return $??U(K,H)};var lH=(H,K="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[H]+K},rH=(H,K,B,$,Z)=>{return{ok:(J)=>()=>{if(q&&H.debug)I(K,`${J} ${B} of ${x(K)} in ${x(H)}`);$?.(K)},err:(J)=>(A)=>{I(A,`Failed to ${J} ${B} of ${x(K)} in ${x(H)}`,w),Z?.(A)}}},aH=(H)=>{if(/^(mailto|tel):/i.test(H))return!0;if(H.includes("://"))try{let K=new URL(H,window.location.origin);return["http:","https:","ftp:"].includes(K.protocol)}catch{return!1}return!0},tH=(H,K,B)=>{if(/^on/i.test(K))throw new Error(`Unsafe attribute: ${K}`);if(B=String(B).trim(),!aH(B))throw new Error(`Unsafe URL for ${K}: ${B}`);H.setAttribute(K,B)},S=(H,K)=>(B,$)=>{let{op:Z,name:W="",read:Q,update:J}=K,A=Q($),L=lH(Z,W);if(O(H)&&O(A)&&B[H]===N)B.attributeChangedCallback(H,null,A);let{ok:X,err:Y}=rH(B,$,L,K.resolve,K.reject);return f(()=>{let V=Symbol(W?`${Z}:${W}`:Z),C=m(H,B,$,L),F=C===N?A:C===j?K.delete?null:A:C;if(K.delete&&F===null)E(()=>{return K.delete($),!0},V).then(X("Deleted")).catch(Y("delete"));else if(F!=null){let G=Q($);if(Object.is(F,G))return;E(()=>{return J($,F),!0},V).then(X("Updated")).catch(Y("update"))}})},eH=(H,K)=>(B,$)=>{let Z=(Q)=>()=>{if(q&&B.debug)I($,`${Q} element in ${x($)} in ${x(B)}`);if(z(K?.resolve))K.resolve($);else{let J=T(H)?H:O(H)?B.getSignal(H):void 0;if(M(J))J.set(0)}},W=(Q)=>(J)=>{I(J,`Failed to ${Q} element in ${x($)} in ${x(B)}`,w),K?.reject?.(J)};return f(()=>{let Q=Symbol("i"),J=Symbol("r"),A=m(H,B,$,"insertion or deletion"),L=A===N?0:A;if(L>0){if(!K)throw new TypeError("No inserter provided");E(()=>{for(let X=0;X<L;X++){let Y=K.create($);if(!Y)continue;$.insertAdjacentElement(K.position??"beforeend",Y)}return!0},Q).then(Z("Inserted")).catch(W("insert"))}else if(L<0)E(()=>{if(K&&(K.position==="afterbegin"||K.position==="beforeend"))for(let X=0;X>L;X--)if(K.position==="afterbegin")$.firstElementChild?.remove();else $.lastElementChild?.remove();else $.remove();return!0},J).then(Z("Removed")).catch(W("remove"))})},HK=(H)=>S(H,{op:"t",read:(K)=>K.textContent,update:(K,B)=>{Array.from(K.childNodes).filter(($)=>$.nodeType!==Node.COMMENT_NODE).forEach(($)=>$.remove()),K.append(document.createTextNode(B))}}),KK=(H,K=H)=>S(K,{op:"p",name:H,read:(B)=>(H in B)?B[H]:j,update:(B,$)=>{B[H]=$}}),BK=(H)=>S(H,{op:"p",name:"hidden",read:(K)=>!K.hidden,update:(K,B)=>{K.hidden=!B}});var $K=(H,K=H)=>S(K,{op:"a",name:H,read:(B)=>B.getAttribute(H),update:(B,$)=>{tH(B,H,$)},delete:(B)=>{B.removeAttribute(H)}}),ZK=(H,K=H)=>S(K,{op:"a",name:H,read:(B)=>B.hasAttribute(H),update:(B,$)=>{B.toggleAttribute(H,$)}}),WK=(H,K=H)=>S(K,{op:"c",name:H,read:(B)=>B.classList.contains(H),update:(B,$)=>{B.classList.toggle(H,$)}}),JK=(H,K=H)=>S(K,{op:"s",name:H,read:(B)=>B.style.getPropertyValue(H),update:(B,$)=>{B.style.setProperty(H,$)},delete:(B)=>{B.style.removeProperty(H)}}),LK=(H,K={})=>S(H,{op:"h",read:(B)=>(B.shadowRoot||!K.shadowRootMode?B:null)?.innerHTML??"",update:(B,$)=>{let{shadowRootMode:Z,allowScripts:W}=K;if(!$){if(B.shadowRoot)B.shadowRoot.innerHTML="<slot></slot>";return""}if(Z&&!B.shadowRoot)B.attachShadow({mode:Z});let Q=B.shadowRoot||B;if(Q.innerHTML=$,!W)return"";return Q.querySelectorAll("script").forEach((J)=>{let A=document.createElement("script");A.appendChild(document.createTextNode(J.textContent??"")),Q.appendChild(A),J.remove()})," with scripts"}}),QK=(H)=>(K,B)=>{if(!i(H))throw new TypeError("Reactives must be an object of passed signals");if(!o(B))throw new TypeError(`Target ${x(B)} is not a custom element`);if(!FH(B,"setSignal"))throw new TypeError(`Target ${x(B)} is not a UIElement component`);for(let[$,Z]of Object.entries(H))B.setSignal($,O(Z)?K.getSignal(Z):D(Z))};var VH=()=>(H)=>H.textContent?.trim(),AK=(H)=>(K)=>K[H],XK=(H)=>(K)=>K.hasAttribute(H),IH=(H)=>(K)=>K.getAttribute(H),YK=(H)=>(K)=>K.classList.contains(H),xK=(H)=>(K)=>window.getComputedStyle(K).getPropertyValue(H),GK=(H)=>XH("",{".label":VH(),[H]:IH("aria-label")}),yK=(H)=>XH("",{".description":VH(),[H]:IH("aria-describedby")});export{S as updateElement,WK as toggleClass,ZK as toggleAttribute,D as toSignal,KH as state,BK as show,HK as setText,JK as setStyle,KK as setProperty,$K as setAttribute,m as resolveReactive,mH as provideContexts,QK as pass,pH as on,I as log,M as isState,T as isSignal,l as isParser,g as isComputed,eH as insertOrRemoveElement,YK as hasClass,XK as hasAttribute,VH as getText,xK as getStyle,AK as getProperty,GK as getLabel,U as getFallback,yK as getDescription,IH as getAttribute,kH as fromSelector,gH as fromEvents,XH as fromDOM,vH as fromContext,E as enqueue,hH as emitEvent,f as effect,LK as dangerouslySetInnerHTML,BH as computed,dH as component,HH as batch,oH as asString,iH as asNumber,sH as asJSON,uH as asInteger,nH as asEnum,cH as asBoolean,j as UNSET,N as RESET,s as MissingElementError,$H as LOG_WARN,TH as LOG_INFO,w as LOG_ERROR,PH as LOG_DEBUG,QH as InvalidSignalError,n as InvalidPropertyNameError,LH as InvalidEffectsError,JH as InvalidComponentNameError,AH as DependencyTimeoutError,WH as CircularMutationError};

//# debugId=11AF286C1D02FDB464756E2164756E21
