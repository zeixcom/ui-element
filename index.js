var Y=($)=>typeof $==="function",v=($,Z)=>Object.prototype.toString.call($)===`[object ${Z}]`,d=($)=>$ instanceof Error?$:Error(String($));class S extends Error{constructor($){super(`Circular dependency in ${$} detected`);return this}}var w,c=new Set,a=0,t=new Map,u,z$=()=>{u=void 0;let $=Array.from(t.values());t.clear();for(let Z of $)Z()},x$=()=>{if(u)cancelAnimationFrame(u);u=requestAnimationFrame(z$)};queueMicrotask(z$);var g=($)=>{let Z=new Set,B=$;return B.off=(W)=>{Z.add(W)},B.cleanup=()=>{for(let W of Z)W();Z.clear()},B},_=($)=>{if(w&&!$.has(w)){let Z=w;$.add(Z),w.off(()=>{$.delete(Z)})}},U=($)=>{for(let Z of $)if(a)c.add(Z);else Z()},i=()=>{while(c.size){let $=Array.from(c);c.clear();for(let Z of $)Z()}},I$=($)=>{a++;try{$()}finally{i(),a--}},m=($,Z)=>{let B=w;w=Z;try{$()}finally{w=B}},R=($,Z)=>new Promise((B,W)=>{t.set(Z||Symbol(),()=>{try{B($())}catch(J){W(J)}}),x$()});var e="State",o=($)=>{let Z=new Set,B=$,W={[Symbol.toStringTag]:e,get:()=>{return _(Z),B},set:(J)=>{if(Object.is(B,J))return;if(B=J,U(Z),G===B)Z.clear()},update:(J)=>{W.set(J(B))}};return W},P=($)=>v($,e);var E="Computed",n=($)=>{let Z=new Set,B=G,W,J,H=!0,Q=!1,z=!1,K=(q)=>{if(!Object.is(q,B))B=q,Q=!0;W=void 0,H=!1},I=()=>{Q=G!==B,B=G,W=void 0},X=(q)=>{let V=d(q);Q=!W||V.name!==W.name||V.message!==W.message,B=G,W=V},A=(q)=>(V)=>{if(z=!1,J=void 0,q(V),Q)U(Z)},L=g(()=>{if(H=!0,J?.abort("Aborted because source signal changed"),Z.size)U(Z);else L.cleanup()}),y=()=>m(()=>{if(z)throw new S("computed");if(Q=!1,Y($)&&$.constructor.name==="AsyncFunction"){if(J)return B;J=new AbortController,J.signal.addEventListener("abort",()=>{z=!1,J=void 0,y()},{once:!0})}let q;z=!0;try{q=J?$(J.signal):$()}catch(V){if(V instanceof DOMException&&V.name==="AbortError")I();else X(V);z=!1;return}if(q instanceof Promise)q.then(A(K),A(X));else if(q==null||G===q)I();else K(q);z=!1},L);return{[Symbol.toStringTag]:E,get:()=>{if(_(Z),i(),H)y();if(W)throw W;return B}}},b=($)=>v($,E),$$=($)=>Y($)&&$.length<2;var G=Symbol(),O=($)=>P($)||b($),D=($)=>O($)?$:$$($)?n($):o($);function k($){let{signals:Z,ok:B,err:W=console.error,nil:J=()=>{}}=Y($)?{signals:[],ok:$}:$,H=!1,Q=g(()=>m(()=>{if(H)throw new S("effect");H=!0;let z=[],K=!1,I=Z.map((A)=>{try{let L=A.get();if(L===G)K=!0;return L}catch(L){return z.push(d(L)),G}}),X=void 0;try{X=K?J():z.length?W(...z):B(...I)}catch(A){X=W(d(A))}finally{if(Y(X))Q.off(X)}H=!1},Q));return Q(),()=>Q.cleanup()}var C=!1,K$="debug",C$="info",X$="warn",f="error",U$=($)=>$?`#${$}`:"",P$=($)=>$?.length?`.${Array.from($).join(".")}`:"",B$=($)=>!!$&&typeof $==="object",T=($)=>typeof $==="string",Y$=($,Z)=>T(Z)&&(Z in $)&&Y($[Z]),G$=($)=>$.nodeType===Node.ELEMENT_NODE,Z$=($)=>$.localName.includes("-"),j$=($)=>{if(!Z$($))return!0;let Z=customElements.get($.localName);return!!Z&&$ instanceof Z},j=($)=>$?`<${$.localName}${U$($.id)}${P$($.classList)}>`:"<unknown>",h=($)=>T($)?`"${$}"`:B$($)?JSON.stringify($):String($),s=($)=>{if($===null)return"null";if(typeof $!=="object")return typeof $;if(Array.isArray($))return"Array";if(Symbol.toStringTag in Object($))return $[Symbol.toStringTag];return $.constructor?.name||"Object"},F=($,Z,B=K$)=>{if(C||[f,X$].includes(B))console[B](Z,$);return $};class q$ extends Error{constructor($){super($);this.name="CircularMutationError"}}var M$=($)=>{let Z=new Set;if($.includes("."))Z.add("class");if($.includes("#"))Z.add("id");if($.includes("[")){let B=$.split("[");for(let W=1;W<B.length;W++){let J=B[W];if(!J.includes("]"))continue;let H=J.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(H)Z.add(H)}}return[...Z]},y$=($,Z)=>{if($.length!==Z.length)return!1;let B=new Set($);for(let W of Z)if(!B.has(W))return!1;return!0},W$=($,Z,B)=>{let W=new MutationObserver(B),J=M$(Z),H={childList:!0,subtree:!0};if(J.length)H.attributes=!0,H.attributeFilter=J;return W.observe($,H),W},A$=($)=>(Z)=>{let B=new Set,W=()=>Array.from(Z.querySelectorAll($)),J=G,H,Q=0,z=2,K=()=>{J=W(),H=W$(Z,$,()=>{if(!B.size){H?.disconnect(),H=void 0;return}if(Q++,Q>z)throw H?.disconnect(),H=void 0,Q=0,new q$("Circular mutation in element selection detected");try{let I=W();if(!y$(J,I))J=I,U(B)}finally{Q--}})};return{[Symbol.toStringTag]:E,get:()=>{if(_(B),!B.size)J=W();else if(!H)K();return J}}},_$=($,Z,B)=>(W)=>()=>A$($)(W).get().reduce(Z,Y(B)?B(W):B),O$=($,Z,B,W,J=!1)=>(H)=>{let Q=new Set,z=Y(W)?W(H):W,K,I,X=()=>{K=(A)=>{let L=A.target;if(!L)return;let y=L.closest($);if(!y||!H.contains(y))return;A.stopPropagation();try{let x=B({event:A,host:H,source:y,value:z});if(!Object.is(x,z)){if(z=x,Q.size>0)U(Q);else if(I)I()}}catch(x){throw A.stopImmediatePropagation(),x}},H.addEventListener(Z,K,J),I=()=>{if(K)H.removeEventListener(Z,K),K=void 0;I=void 0}};return{[Symbol.toStringTag]:E,get:()=>{if(_(Q),Q.size&&!K)X();return z}}},D$=($,Z,B)=>(W)=>()=>{let J=W.querySelector($);if(!J||!j$(J))return B;let H=Z in J?J[Z]:B;return H==null||H===G?B:H};var N=Symbol(),T$=new Set(["constructor","prototype"]),N$=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),J$=($)=>Y($)&&$.length>=2,F$=($)=>{if(T$.has($))return`Property name "${$}" is a reserved word`;if(N$.has($))return`Property name "${$}" conflicts with inherited HTMLElement property`;return null},H$=($,Z,B=Z)=>{let W=$.filter(Y).map((J)=>J(Z,B));return()=>{W.filter(Y).forEach((J)=>J()),W.length=0}},w$=()=>({first:($,...Z)=>(B)=>{let W=(B.shadowRoot||B).querySelector($);if(W)H$(Z,B,W)},all:($,...Z)=>(B)=>{let W=new Map,J=B.shadowRoot||B,H=(I)=>{if(!W.has(I))W.set(I,H$(Z,B,I))},Q=(I)=>{let X=W.get(I);if(Y(X))X();W.delete(I)},z=(I)=>(X)=>{if(G$(X)){if(X.matches($))I(X);X.querySelectorAll($).forEach(I)}},K=W$(J,$,(I)=>{for(let X of I)X.addedNodes.forEach(z(H)),X.removedNodes.forEach(z(Q))});return J.querySelectorAll($).forEach(H),()=>{K.disconnect(),W.forEach((I)=>I()),W.clear()}}}),R$=($,Z={},B)=>{for(let W of Object.keys(Z)){let J=F$(W);if(J)throw new TypeError(`${J} in component "${$}".`)}customElements.define($,class extends HTMLElement{debug;#$={};#B;static observedAttributes=Object.entries(Z)?.filter(([,W])=>J$(W)).map(([W])=>W)??[];constructor(){super();for(let[W,J]of Object.entries(Z)){if(J==null)continue;let H=J$(J)?J(this,null):Y(J)?J(this):J;if(H!=null)this.setSignal(W,D(H))}}connectedCallback(){if(C){if(this.debug=this.hasAttribute("debug"),this.debug)F(this,"Connected")}let W=B(this,w$());if(!Array.isArray(W))throw new TypeError(`Expected array of functions as return value of setup function in ${j(this)}`);this.#B=H$(W,this)}disconnectedCallback(){if(Y(this.#B))this.#B();if(C&&this.debug)F(this,"Disconnected")}attributeChangedCallback(W,J,H){if(H===J||b(this.#$[W]))return;let Q=Z[W];if(!J$(Q))return;let z=Q(this,H,J);if(C&&this.debug)F(H,`Attribute "${W}" of ${j(this)} changed from ${h(J)} to ${h(H)}, parsed as <${s(z)}> ${h(z)}`);this[W]=z}getSignal(W){let J=this.#$[W];if(C&&this.debug)F(J,`Get ${s(J)} "${String(W)}" in ${j(this)}`);return J}setSignal(W,J){let H=F$(String(W));if(H)throw new TypeError(`${H} on ${j(this)}.`);if(!O(J))throw new TypeError(`Expected signal as value for property "${String(W)}" on ${j(this)}.`);let Q=this.#$[W],z=P(J);if(this.#$[W]=J,Object.defineProperty(this,W,{get:J.get,set:z?J.set:void 0,enumerable:!0,configurable:z}),Q&&P(Q))Q.set(G);if(C&&this.debug)F(J,`Set ${s(J)} "${String(W)} in ${j(this)}`)}})};var Q$="context-request";class L$ extends Event{$;Z;B;constructor($,Z,B=!1){super(Q$,{bubbles:!0,composed:!0});this.context=$;this.callback=Z;this.subscribe=B}}var k$=($)=>(Z)=>{let B=(W)=>{let{context:J,callback:H}=W;if($.includes(J)&&Y(H))W.stopImmediatePropagation(),H(Z.getSignal(String(J)))};return Z.addEventListener(Q$,B),()=>Z.removeEventListener(Q$,B)},S$=($,Z)=>(B)=>{let W=D(Z);return B.dispatchEvent(new L$($,(J)=>{W=J})),W};var V$=($,Z)=>{if(Z==null)return;let B=$(Z);return Number.isFinite(B)?B:void 0},E$=()=>($,Z)=>Z!=="false"&&Z!=null,b$=($=0)=>(Z,B)=>{if(B==null)return $;let W=B.trim();if(W==="")return $;if(W.toLowerCase().startsWith("0x")){let H=parseInt(W,16);return Number.isFinite(H)?H:$}let J=V$(parseFloat,B);return J!=null?Math.trunc(J):$},f$=($=0)=>(Z,B)=>V$(parseFloat,B)??$,h$=($="")=>(Z,B)=>B??$,d$=($)=>(Z,B)=>{if(B==null)return $[0];let W=B.toLowerCase();return $.find((H)=>H.toLowerCase()===W)?B:$[0]},g$=($)=>(Z,B)=>{if((B??$)==null)throw new ReferenceError("Value and fallback are both null or undefined");if(B==null)return $;if(B==="")throw new SyntaxError("Empty string is not valid JSON");let W;try{W=JSON.parse(B)}catch(J){throw new SyntaxError(`Failed to parse JSON: ${String(J)}`,{cause:J})}return W??$};var p=Symbol("RESOLVE_ERROR"),r=($,Z,B,W)=>{try{return T($)?Z.getSignal($).get():O($)?$.get():Y($)?$(B):N}catch(J){if(W)F(J,`Failed to resolve value of ${h($)} for ${W} in ${j(B)} in ${j(Z)}`,f);return p}},m$=($,Z="")=>{return{a:"attribute ",c:"class ",h:"inner HTML",p:"property ",s:"style property ",t:"text content"}[$]+Z},p$=($,Z,B,W,J)=>{return{ok:(z)=>()=>{if(C&&$.debug)F(Z,`${z} ${B} of ${j(Z)} in ${j($)}`);W?.(Z)},err:(z)=>(K)=>{F(K,`Failed to ${z} ${B} of ${j(Z)} in ${j($)}`,f),J?.(K)}}},l=($,Z)=>{return Symbol(Z?`${$}:${Z}`:$)},v$=($,Z,B,W,J)=>{return k(()=>{let H=r($,Z,B,W);if(H===p)return;J(H)})},c$=($)=>{if(/^(mailto|tel):/i.test($))return!0;if($.includes("://"))try{let Z=new URL($,window.location.origin);return["http:","https:","ftp:"].includes(Z.protocol)}catch{return!1}return!0},u$=($,Z,B)=>{if(/^on/i.test(Z))throw new Error(`Unsafe attribute: ${Z}`);if(B=String(B).trim(),!c$(B))throw new Error(`Unsafe URL for ${Z}: ${B}`);$.setAttribute(Z,B)},M=($,Z)=>(B,W)=>{let{op:J,name:H="",read:Q,update:z}=Z,K=Q(W),I=m$(J,H);if(T($)&&T(K)&&B[$]===N)B.attributeChangedCallback($,null,K);let{ok:X,err:A}=p$(B,W,I,Z.resolve,Z.reject);return k(()=>{let L=l(J,H),y=l(`${J}-delete`,H),x=r($,B,W,I);if(x===p)return;let q=x===N?K:x===G?Z.delete?null:K:x;if(Z.delete&&q===null)R(()=>{return Z.delete(W),!0},y).then(X("Deleted")).catch(A("delete"));else if(q!=null){let V=Q(W);if(Object.is(q,V))return;R(()=>{return z(W,q),!0},L).then(X("Updated")).catch(A("update"))}})},i$=($,Z)=>(B,W)=>{let J=(Q)=>()=>{if(C&&B.debug)F(W,`${Q} element in ${j(W)} in ${j(B)}`);if(Y(Z?.resolve))Z.resolve(W);else{let z=O($)?$:T($)?B.getSignal($):void 0;if(P(z))z.set(0)}},H=(Q)=>(z)=>{F(z,`Failed to ${Q} element in ${j(W)} in ${j(B)}`,f),Z?.reject?.(z)};return k(()=>{let Q=l("insert"),z=l("remove"),K=r($,B,W,"insertion or deletion");if(K===p)return;let I=K===N?0:K;if(I>0){if(!Z)throw new TypeError("No inserter provided");R(()=>{for(let X=0;X<I;X++){let A=Z.create(W);if(!A)continue;W.insertAdjacentElement(Z.position??"beforeend",A)}return!0},Q).then(J("Inserted")).catch(H("insert"))}else if(I<0)R(()=>{if(Z&&(Z.position==="afterbegin"||Z.position==="beforeend"))for(let X=0;X>I;X--)if(Z.position==="afterbegin")W.firstElementChild?.remove();else W.lastElementChild?.remove();else W.remove();return!0},z).then(J("Removed")).catch(H("remove"))})},o$=($)=>M($,{op:"t",read:(Z)=>Z.textContent,update:(Z,B)=>{Array.from(Z.childNodes).filter((W)=>W.nodeType!==Node.COMMENT_NODE).forEach((W)=>W.remove()),Z.append(document.createTextNode(B))}}),n$=($,Z=$)=>M(Z,{op:"p",name:String($),read:(B)=>($ in B)?B[$]:G,update:(B,W)=>{B[$]=W}}),s$=($)=>M($,{op:"p",name:"hidden",read:(Z)=>!Z.hidden,update:(Z,B)=>{Z.hidden=!B}}),l$=($,Z=$)=>M(Z,{op:"a",name:$,read:(B)=>B.getAttribute($),update:(B,W)=>{u$(B,$,W)},delete:(B)=>{B.removeAttribute($)}}),r$=($,Z=$)=>M(Z,{op:"a",name:$,read:(B)=>B.hasAttribute($),update:(B,W)=>{B.toggleAttribute($,W)}}),a$=($,Z=$)=>M(Z,{op:"c",name:$,read:(B)=>B.classList.contains($),update:(B,W)=>{B.classList.toggle($,W)}}),t$=($,Z=$)=>M(Z,{op:"s",name:$,read:(B)=>B.style.getPropertyValue($),update:(B,W)=>{B.style.setProperty($,W)},delete:(B)=>{B.style.removeProperty($)}}),e$=($,Z={})=>M($,{op:"h",read:(B)=>(B.shadowRoot||!Z.shadowRootMode?B:null)?.innerHTML??"",update:(B,W)=>{let{shadowRootMode:J,allowScripts:H}=Z;if(!W){if(B.shadowRoot)B.shadowRoot.innerHTML="<slot></slot>";return""}if(J&&!B.shadowRoot)B.attachShadow({mode:J});let Q=B.shadowRoot||B;if(Q.innerHTML=W,!H)return"";return Q.querySelectorAll("script").forEach((z)=>{let K=document.createElement("script");K.appendChild(document.createTextNode(z.textContent??"")),Q.appendChild(K),z.remove()})," with scripts"}}),$B=($,Z,B=!1)=>(W,J=W)=>{if(!Y(Z))throw new TypeError(`Invalid event listener provided for "${$} event on element ${j(J)}`);return J.addEventListener($,Z,B),()=>J.removeEventListener($,Z)},BB=($,Z)=>(B,W=B)=>v$(Z,B,W,`custom event "${$}" detail`,(J)=>{if(J===N||J===G)return;W.dispatchEvent(new CustomEvent($,{detail:J,bubbles:!0}))}),ZB=($)=>(Z,B)=>{let W=Y($)?$(B):$;if(!B$(W))throw new TypeError("Passed signals must be an object or a provider function");let J=()=>k(()=>{for(let[H,Q]of Object.entries(W)){let z=r(Q,Z,B,`signal ${H}`);if(z===p)throw new Error(`Failed to resolve signal ${H} for ${j(B)}`);if(z==null||z===N)continue;B[H]=z}});if(!Z$(B))return J();customElements.whenDefined(B.localName).then(()=>{if(!Y$(B,"setSignal"))return J();for(let[H,Q]of Object.entries(W))B.setSignal(H,T(Q)?Z.getSignal(Q):D(Q))}).catch((H)=>{throw new Error(`Failed to pass signals to ${j(B)}`,{cause:H})})};export{M as updateElement,a$ as toggleClass,r$ as toggleAttribute,D as toSignal,o as state,s$ as show,o$ as setText,t$ as setStyle,n$ as setProperty,l$ as setAttribute,k$ as provide,ZB as pass,$B as on,F as log,P as isState,O as isSignal,b as isComputed,i$ as insertOrRemoveElement,A$ as fromSelector,O$ as fromEvent,_$ as fromDescendants,D$ as fromDescendant,S$ as fromContext,R as enqueue,BB as emit,k as effect,e$ as dangerouslySetInnerHTML,n as computed,R$ as component,I$ as batch,h$ as asString,f$ as asNumber,g$ as asJSON,b$ as asInteger,d$ as asEnum,E$ as asBoolean,G as UNSET,N as RESET,X$ as LOG_WARN,C$ as LOG_INFO,f as LOG_ERROR,K$ as LOG_DEBUG};

//# debugId=495F3D7A6A4D047C64756E2164756E21
