
<tab-list>
	<menu>
		<li><button type="button" aria-pressed="true">HTML</button></li>
		<li><button type="button" aria-pressed="false">TypeScript</button></li>
	</menu>
	
	<accordion-panel open>
		<details open aria-disabled="true">
			<summary class="visually-hidden">
				<div class="summary">HTML</div>
			</summary>
			<code-block language="html" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
				<p class="meta">
					<span class="file">lazy-load.html</span>
					<span class="language">html</span>
				</p>
				<pre class="language-html"><code>&lt;lazy-load src=&quot;./examples/snippets/snippet.html&quot;&gt;
	&lt;p class=&quot;loading&quot;&gt;Loading...&lt;/p&gt;
	&lt;p class=&quot;error&quot;&gt;&lt;/p&gt;
&lt;/lazy-load&gt;</code></pre>
				<input-button class="copy">
					<button type="button" class="secondary small">Copy</button>
				</input-button>
			</code-block>
		</details>
	</accordion-panel>

	<accordion-panel>
		<details aria-disabled="true">
			<summary class="visually-hidden">
				<div class="summary">TS</div>
			</summary>
			<code-block language="ts" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
				<p class="meta">
					<span class="file">lazy-load.ts</span>
					<span class="language">ts</span>
				</p>
				<pre class="language-ts"><code>import { effect, enqueue, removeElement, setText, UIElement } from &quot;@zeix/ui-element&quot;

export class LazyLoad extends UIElement {
	static states = {
		content: &#39;&#39;,
		error: &#39;&#39;,
		loaded: false
	}

	connectedCallback() {
		super.connectedCallback()

		const url = this.getAttribute(&#39;src&#39;)
		if (url) { // Do sanity checks on the user-provided URL here
			this.loadContent(url).then(([error, content]) =&gt; {
				this.set(&#39;content&#39;, content)
				this.set(&#39;error&#39;, error)
				this.set(&#39;loaded&#39;, true)
			})
		}

		// Remove loading element when &#39;loaded&#39; becomes true
		this.first(&#39;.loading&#39;).sync(removeElement(&#39;loaded&#39;))

		// Set error text when &#39;error&#39; is set
		this.first(&#39;.error&#39;).sync(setText(&#39;error&#39;))

		// Update the shadow DOM or innerHTML when content changes
		effect(() =&gt; {
			const content = this.get(&#39;content&#39;) as string
			if (content) {
				enqueue(() =&gt; {
					// this.root = this.shadowRoot || this.attachShadow({ mode: &#39;open&#39; })
					this.root.innerHTML = content 
					this.root.querySelectorAll(&#39;script&#39;).forEach(script =&gt; {
						const newScript = document.createElement(&#39;script&#39;)
						newScript.appendChild(document.createTextNode(script.textContent ?? &#39;&#39;))
						this.root.appendChild(newScript)
						script.remove()
					})
				}, [this.root as Element, &#39;h&#39;])
			}
		})
	}

	async loadContent(url: string): Promise&lt;[string, string]&gt; {
		try {
			const response = await fetch(url)
			if (!response.ok) return [response.statusText, &#39;&#39;]
			const text = await response.text()
			return [&#39;&#39;, text]
		} catch (error) {
			return [error.message, &#39;&#39;]
		}
	}

}
LazyLoad.define(&#39;lazy-load&#39;)</code></pre>
				<input-button class="copy">
					<button type="button" class="secondary small">Copy</button>
				</input-button>
			</code-block>
		</details>
	</accordion-panel>
</tab-list>
