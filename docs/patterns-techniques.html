<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Patterns & Techniques – UIElement Docs</title>
		<meta name="description" content="Advanced patterns, testing strategies, and best practices" />
		<base href="./patterns-techniques.html" />
		<link rel="stylesheet" href="assets/main.css" />
		<script type="module" src="assets/main.js"></script>
	</head>
	<body>
		<client-router>
			<header class="content-grid">
				<h1 class="content">
					UIElement Docs <small>Version 0.13.1</small>
				</h1>
				
	<nav class="breakout">
		<ol>
			
				<li>
					<a href="index.html">
						<span class="icon">📖</span>
						<strong>Introduction</strong>
						<small>Overview and key benefits of UIElement</small>
					</a>
				</li>

				<li>
					<a href="getting-started.html">
						<span class="icon">🚀</span>
						<strong>Getting Started</strong>
						<small>Installation, setup, and first steps</small>
					</a>
				</li>

				<li>
					<a href="building-components.html">
						<span class="icon">🏗️</span>
						<strong>Building Components</strong>
						<small>Anatomy, lifecycle, signals, effects</small>
					</a>
				</li>

				<li>
					<a href="styling-components.html">
						<span class="icon">🎨</span>
						<strong>Styling Components</strong>
						<small>Scoped styles, CSS custom properties</small>
					</a>
				</li>

				<li>
					<a href="data-flow.html">
						<span class="icon">🔄</span>
						<strong>Data Flow</strong>
						<small>Passing state, events, context</small>
					</a>
				</li>

				<li>
					<a href="examples-recipes.html">
						<span class="icon">🍽️</span>
						<strong>Examples & Recipes</strong>
						<small>Common use cases and demos</small>
					</a>
				</li>

				<li>
					<a href="patterns-techniques.html" class="active">
						<span class="icon">💡</span>
						<strong>Patterns & Techniques</strong>
						<small>Advanced patterns, testing strategies, and best practices</small>
					</a>
				</li>

				<li>
					<a href="api-reference.html">
						<span class="icon">📚</span>
						<strong>API Reference</strong>
						<small>Detailed documentation of types and functions</small>
					</a>
				</li>

				<li>
					<a href="about-community.html">
						<span class="icon">🤝</span>
						<strong>About & Community</strong>
						<small>License, versioning, getting involved</small>
					</a>
				</li>
		</ol>
	</nav>
				<callout-box class="content danger" hidden>
					<p class="error" role="alert" aria-live="polite"></p>
				</callout-box>
			</header>
			<main><section class="hero">


	            <h1 id="patterns-amp-techniques">
	                <a name="patterns-amp-techniques" class="anchor" href="#patterns-amp-techniques">
		                <span class="permalink">🔗</span>
	                </a>
	                💡 Patterns &amp; Techniques
	            </h1><p class="lead"><strong>Master advanced UIElement patterns and best practices.</strong> Learn how to build maintainable, testable components, handle complex state scenarios, and integrate with modern development workflows.</p>
</section>

<section>


	            <h2 id="advanced-component-patterns">
	                <a name="advanced-component-patterns" class="anchor" href="#advanced-component-patterns">
		                <span class="permalink">🔗</span>
	                </a>
	                Advanced Component Patterns
	            </h2>
	            <h3 id="composite-components">
	                <a name="composite-components" class="anchor" href="#composite-components">
		                <span class="permalink">🔗</span>
	                </a>
	                Composite Components
	            </h3><p>Build complex UIs by composing multiple focused components:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// Parent component coordinates children</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'data-table'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		data: </span><span style="color:#A6E22E">asJSON</span><span style="color:#F8F8F2">([]),</span></span>
<span class="line"><span style="color:#F8F8F2">		sortBy: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		sortOrder: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'asc'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">all</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#88846F">		// Pass configuration to header</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'table-header'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			pass</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#F8F8F2">				sortBy: </span><span style="color:#E6DB74">'sortBy'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				sortOrder: </span><span style="color:#E6DB74">'sortOrder'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Listen for sort changes</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'table-header'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'sort'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">				el.sortBy </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> e.detail.column</span></span>
<span class="line"><span style="color:#F8F8F2">				el.sortOrder </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> e.detail.order</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Pass sorted data to body</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'table-body'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			pass</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#A6E22E">				data</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> sortData</span><span style="color:#F8F8F2">(el.data, el.sortBy, el.sortOrder),</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Focused child components</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'table-header'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		sortBy: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		sortOrder: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'asc'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">all</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">		all</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'[data-column]'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'sorted'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">th</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> th.dataset.column </span><span style="color:#F92672">===</span><span style="color:#F8F8F2"> el.sortBy),</span></span>
<span class="line"><span style="color:#A6E22E">			setAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'aria-sort'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">th</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				if</span><span style="color:#F8F8F2"> (th.dataset.column </span><span style="color:#F92672">!==</span><span style="color:#F8F8F2"> el.sortBy) </span><span style="color:#F92672">return</span><span style="color:#E6DB74"> 'none'</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> el.sortOrder </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'asc'</span><span style="color:#F92672"> ?</span><span style="color:#E6DB74"> 'ascending'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'descending'</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#A6E22E">			on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#F8F8F2"> column </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> e.target.dataset.column</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#F8F8F2"> newOrder </span><span style="color:#F92672">=</span></span>
<span class="line"><span style="color:#F8F8F2">					el.sortBy </span><span style="color:#F92672">===</span><span style="color:#F8F8F2"> column </span><span style="color:#F92672">&#x26;&#x26;</span><span style="color:#F8F8F2"> el.sortOrder </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'asc'</span></span>
<span class="line"><span style="color:#F92672">						?</span><span style="color:#E6DB74"> 'desc'</span></span>
<span class="line"><span style="color:#F92672">						:</span><span style="color:#E6DB74"> 'asc'</span></span>
<span class="line"><span style="color:#F8F8F2">				el.</span><span style="color:#A6E22E">dispatchEvent</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F92672">					new</span><span style="color:#A6E22E"> CustomEvent</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'sort'</span><span style="color:#F8F8F2">, {</span></span>
<span class="line"><span style="color:#F8F8F2">						detail: { column, order: newOrder },</span></span>
<span class="line"><span style="color:#F8F8F2">					}),</span></span>
<span class="line"><span style="color:#F8F8F2">				)</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="state-machine-pattern">
	                <a name="state-machine-pattern" class="anchor" href="#state-machine-pattern">
		                <span class="permalink">🔗</span>
	                </a>
	                State Machine Pattern
	            </h3><p>Implement complex component states using local signals:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'upload-zone'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		files: </span><span style="color:#A6E22E">asJSON</span><span style="color:#F8F8F2">([]),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// State machine with local signals</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> state </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> signal</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'idle'</span><span style="color:#F8F8F2">) </span><span style="color:#88846F">// idle, dragover, uploading, success, error</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> progress </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> signal</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> error </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> signal</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> states </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">			idle</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">				canDrop: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showProgress: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showError: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#A6E22E">			dragover</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">				canDrop: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showProgress: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showError: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#A6E22E">			uploading</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">				canDrop: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showProgress: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showError: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#A6E22E">			success</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">				canDrop: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showProgress: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showError: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#A6E22E">			error</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">				canDrop: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showProgress: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				showError: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#A6E22E"> currentState</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> states[</span><span style="color:#A6E22E">state</span><span style="color:#F8F8F2">()]()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.drop-zone'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'idle'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> state</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'idle'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'dragover'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> state</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'dragover'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'uploading'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> state</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'uploading'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'success'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> state</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'success'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				toogleClass</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'error'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#A6E22E"> state</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'error'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'dragenter'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					e.</span><span style="color:#A6E22E">preventDefault</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">					if</span><span style="color:#F8F8F2"> (</span><span style="color:#A6E22E">currentState</span><span style="color:#F8F8F2">().canDrop) state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'dragover'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'dragleave'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'idle'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'drop'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#FD971F;font-style:italic"> e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					e.</span><span style="color:#A6E22E">preventDefault</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">					if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">!</span><span style="color:#A6E22E">currentState</span><span style="color:#F8F8F2">().canDrop) </span><span style="color:#F92672">return</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">					state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'uploading'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">					progress.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">					try</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">						const</span><span style="color:#F8F8F2"> files </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> Array.</span><span style="color:#A6E22E">from</span><span style="color:#F8F8F2">(e.dataTransfer.files)</span></span>
<span class="line"><span style="color:#F92672">						for</span><span style="color:#F8F8F2"> (</span><span style="color:#66D9EF;font-style:italic">let</span><span style="color:#F8F8F2"> i </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 0</span><span style="color:#F8F8F2">; i </span><span style="color:#F92672">&#x3C;</span><span style="color:#F8F8F2"> files.length; i</span><span style="color:#F92672">++</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F92672">							await</span><span style="color:#A6E22E"> uploadFile</span><span style="color:#F8F8F2">(files[i])</span></span>
<span class="line"><span style="color:#F8F8F2">							progress.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(((i </span><span style="color:#F92672">+</span><span style="color:#AE81FF"> 1</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> files.length) </span><span style="color:#F92672">*</span><span style="color:#AE81FF"> 100</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">						}</span></span>
<span class="line"><span style="color:#F8F8F2">						state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'success'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#A6E22E">						setTimeout</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'idle'</span><span style="color:#F8F8F2">), </span><span style="color:#AE81FF">2000</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">					} </span><span style="color:#F92672">catch</span><span style="color:#F8F8F2"> (err) {</span></span>
<span class="line"><span style="color:#F8F8F2">						state.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'error'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">						error.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(err.message)</span></span>
<span class="line"><span style="color:#F8F8F2">					}</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.progress'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#A6E22E">					currentState</span><span style="color:#F8F8F2">().showProgress </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'width'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#E6DB74"> `</span><span style="color:#F92672">${</span><span style="color:#A6E22E">progress</span><span style="color:#F8F8F2">()</span><span style="color:#F92672">}</span><span style="color:#E6DB74">%`</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.error'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#A6E22E">					currentState</span><span style="color:#F8F8F2">().showError </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"><span style="color:#A6E22E">				setText</span><span style="color:#F8F8F2">(error),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="plugin-architecture">
	                <a name="plugin-architecture" class="anchor" href="#plugin-architecture">
		                <span class="permalink">🔗</span>
	                </a>
	                Plugin Architecture
	            </h3><p>Create extensible components using composition:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// Base editor component</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'code-editor'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		content: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		language: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'javascript'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> plugins </span><span style="color:#F92672">=</span><span style="color:#F92672"> new</span><span style="color:#A6E22E"> Set</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Plugin registration API</span></span>
<span class="line"><span style="color:#F8F8F2">		el.</span><span style="color:#A6E22E">addPlugin</span><span style="color:#F92672"> =</span><span style="color:#FD971F;font-style:italic"> plugin</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">			plugins.</span><span style="color:#A6E22E">add</span><span style="color:#F8F8F2">(plugin)</span></span>
<span class="line"><span style="color:#F8F8F2">			plugin.</span><span style="color:#A6E22E">init</span><span style="color:#F8F8F2">(el)</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">		el.</span><span style="color:#A6E22E">removePlugin</span><span style="color:#F92672"> =</span><span style="color:#FD971F;font-style:italic"> plugin</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">			plugin.</span><span style="color:#A6E22E">destroy</span><span style="color:#F8F8F2">?.()</span></span>
<span class="line"><span style="color:#F8F8F2">			plugins.</span><span style="color:#A6E22E">delete</span><span style="color:#F8F8F2">(plugin)</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.editor'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setText</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'content'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'input'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.content </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> e.target.value</span></span>
<span class="line"><span style="color:#88846F">					// Notify plugins</span></span>
<span class="line"><span style="color:#F8F8F2">					plugins.</span><span style="color:#A6E22E">forEach</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">plugin</span><span style="color:#66D9EF;font-style:italic"> =></span></span>
<span class="line"><span style="color:#F8F8F2">						plugin.</span><span style="color:#A6E22E">onContentChange</span><span style="color:#F8F8F2">?.(el.content),</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Syntax highlighting plugin</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#F8F8F2"> syntaxHighlightPlugin </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">	init</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">editor</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FD971F">		this</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">highlight</span><span style="color:#F8F8F2">(editor.content)</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	onContentChange</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">content</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FD971F">		this</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">highlight</span><span style="color:#F8F8F2">(content)</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	highlight</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">content</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#88846F">		// Syntax highlighting logic</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Line numbers plugin</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#F8F8F2"> lineNumbersPlugin </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">	init</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">editor</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FD971F">		this</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">addLineNumbers</span><span style="color:#F8F8F2">(editor)</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	addLineNumbers</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">editor</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#88846F">		// Line number implementation</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>
</section>

<section>


	            <h2 id="testing-strategies">
	                <a name="testing-strategies" class="anchor" href="#testing-strategies">
		                <span class="permalink">🔗</span>
	                </a>
	                Testing Strategies
	            </h2>
	            <h3 id="understanding-uielement39s-timing">
	                <a name="understanding-uielement39s-timing" class="anchor" href="#understanding-uielement39s-timing">
		                <span class="permalink">🔗</span>
	                </a>
	                Understanding UIElement&#39;s Timing
	            </h3><p>UIElement uses a scheduled effect system that impacts how you write tests:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// ❌ Wrong: Expecting immediate DOM updates</span></span>
<span class="line"><span style="color:#A6E22E">it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'updates count display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	const</span><span style="color:#F8F8F2"> component </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'counter'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	component.count </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">	// This will fail - DOM not updated yet</span></span>
<span class="line"><span style="color:#A6E22E">	expect</span><span style="color:#F8F8F2">(component.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.count'</span><span style="color:#F8F8F2">).textContent).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'5'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// ✅ Correct: Wait for scheduled effects</span></span>
<span class="line"><span style="color:#A6E22E">it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'updates count display'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	const</span><span style="color:#F8F8F2"> component </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'counter'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	component.count </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">	// Wait for effects to apply</span></span>
<span class="line"><span style="color:#F92672">	await</span><span style="color:#F92672"> new</span><span style="color:#66D9EF;font-style:italic"> Promise</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">resolve</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#A6E22E"> requestAnimationFrame</span><span style="color:#F8F8F2">(resolve))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	expect</span><span style="color:#F8F8F2">(component.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.count'</span><span style="color:#F8F8F2">).textContent).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'5'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="component-state-isolation">
	                <a name="component-state-isolation" class="anchor" href="#component-state-isolation">
		                <span class="permalink">🔗</span>
	                </a>
	                Component State Isolation
	            </h3><p>Components maintain state between test runs, which can cause interference:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// ❌ Tests can interfere with each other</span></span>
<span class="line"><span style="color:#A6E22E">describe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Counter Component'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">	it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'starts at zero'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> counter </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'my-counter'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(counter.count).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'increments when clicked'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> counter </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'my-counter'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#88846F">		// This test might start with count=1 from previous test!</span></span>
<span class="line"><span style="color:#F8F8F2">		counter.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'button'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">click</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">		await</span><span style="color:#A6E22E"> animationFrame</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(counter.count).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">) </span><span style="color:#88846F">// Could be 2 if state persisted</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// ✅ Proper test isolation</span></span>
<span class="line"><span style="color:#A6E22E">describe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Counter Component'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	let</span><span style="color:#F8F8F2"> counter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	beforeEach</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// Create fresh component for each test</span></span>
<span class="line"><span style="color:#F8F8F2">		document.body.innerHTML </span><span style="color:#F92672">=</span><span style="color:#E6DB74"> `</span></span>
<span class="line"><span style="color:#E6DB74">            &#x3C;my-counter data-test="</span><span style="color:#F92672">${</span><span style="color:#F8F8F2">Date.</span><span style="color:#A6E22E">now</span><span style="color:#F8F8F2">()</span><span style="color:#F92672">}</span><span style="color:#E6DB74">"></span></span>
<span class="line"><span style="color:#E6DB74">                &#x3C;span class="count">0&#x3C;/span></span></span>
<span class="line"><span style="color:#E6DB74">                &#x3C;button>+&#x3C;/button></span></span>
<span class="line"><span style="color:#E6DB74">            &#x3C;/my-counter></span></span>
<span class="line"><span style="color:#E6DB74">        `</span></span>
<span class="line"><span style="color:#F8F8F2">		counter </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'my-counter'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	afterEach</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// Clean up</span></span>
<span class="line"><span style="color:#F8F8F2">		counter?.</span><span style="color:#A6E22E">remove</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'starts at zero'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(counter.count).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'increments when clicked'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">		counter.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'button'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">click</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">		await</span><span style="color:#A6E22E"> animationFrame</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(counter.count).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Helper function for timing</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#A6E22E"> animationFrame</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#F92672">	new</span><span style="color:#66D9EF;font-style:italic"> Promise</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">resolve</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#A6E22E"> requestAnimationFrame</span><span style="color:#F8F8F2">(resolve))</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="testing-async-components">
	                <a name="testing-async-components" class="anchor" href="#testing-async-components">
		                <span class="permalink">🔗</span>
	                </a>
	                Testing Async Components
	            </h3><p>Components with async behavior need different timing strategies:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// Component with async initialization</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'data-loader'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		data: </span><span style="color:#A6E22E">asJSON</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">null</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		loading: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		error: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#88846F">		// Async initialization</span></span>
<span class="line"><span style="color:#F8F8F2">		() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">			const</span><span style="color:#A6E22E"> loadData</span><span style="color:#F92672"> =</span><span style="color:#F92672"> async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">				el.loading </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> true</span></span>
<span class="line"><span style="color:#F92672">				try</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">					const</span><span style="color:#F8F8F2"> response </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#A6E22E"> fetch</span><span style="color:#F8F8F2">(el.</span><span style="color:#A6E22E">getAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'src'</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">					el.data </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#F8F8F2"> response.</span><span style="color:#A6E22E">json</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">				} </span><span style="color:#F92672">catch</span><span style="color:#F8F8F2"> (err) {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.error </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> err.message</span></span>
<span class="line"><span style="color:#F8F8F2">				} </span><span style="color:#F92672">finally</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.loading </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> false</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">			// Start loading when component mounts</span></span>
<span class="line"><span style="color:#A6E22E">			setTimeout</span><span style="color:#F8F8F2">(loadData, </span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">		},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'.loading'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> (el.loading </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.error'</span><span style="color:#F8F8F2">, </span><span style="color:#A6E22E">setText</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'error'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'.content'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			setText</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> JSON.</span><span style="color:#A6E22E">stringify</span><span style="color:#F8F8F2">(el.data)),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Test async component</span></span>
<span class="line"><span style="color:#A6E22E">it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'loads data on mount'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">	// Mock fetch</span></span>
<span class="line"><span style="color:#F8F8F2">	global.fetch </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> jest.</span><span style="color:#A6E22E">fn</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		Promise</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">resolve</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#A6E22E">			json</span><span style="color:#F8F8F2">: () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#66D9EF;font-style:italic"> Promise</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">resolve</span><span style="color:#F8F8F2">({ message: </span><span style="color:#E6DB74">'Hello'</span><span style="color:#F8F8F2"> }),</span></span>
<span class="line"><span style="color:#F8F8F2">		}),</span></span>
<span class="line"><span style="color:#F8F8F2">	)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	document.body.innerHTML </span><span style="color:#F92672">=</span><span style="color:#E6DB74"> '&#x3C;data-loader src="/api/data">&#x3C;/data-loader>'</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	const</span><span style="color:#F8F8F2"> loader </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'data-loader'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">	// Wait for async initialization</span></span>
<span class="line"><span style="color:#F92672">	await</span><span style="color:#F92672"> new</span><span style="color:#66D9EF;font-style:italic"> Promise</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">resolve</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#A6E22E"> setTimeout</span><span style="color:#F8F8F2">(resolve, </span><span style="color:#AE81FF">150</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F92672">	await</span><span style="color:#A6E22E"> animationFrame</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	expect</span><span style="color:#F8F8F2">(loader.data).</span><span style="color:#A6E22E">toEqual</span><span style="color:#F8F8F2">({ message: </span><span style="color:#E6DB74">'Hello'</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#A6E22E">	expect</span><span style="color:#F8F8F2">(loader.loading).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="mocking-browser-apis">
	                <a name="mocking-browser-apis" class="anchor" href="#mocking-browser-apis">
		                <span class="permalink">🔗</span>
	                </a>
	                Mocking Browser APIs
	            </h3><p>Many components interact with browser APIs that need careful mocking:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// Component using clipboard API</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'copy-button'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		text: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'button'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				try</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">					await</span><span style="color:#F8F8F2"> navigator.clipboard.</span><span style="color:#A6E22E">writeText</span><span style="color:#F8F8F2">(el.text)</span></span>
<span class="line"><span style="color:#F8F8F2">					el.</span><span style="color:#A6E22E">dispatchEvent</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">new</span><span style="color:#A6E22E"> CustomEvent</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copied'</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">				} </span><span style="color:#F92672">catch</span><span style="color:#F8F8F2"> (err) {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.</span><span style="color:#A6E22E">dispatchEvent</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F92672">						new</span><span style="color:#A6E22E"> CustomEvent</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copy-error'</span><span style="color:#F8F8F2">, { detail: err.message }),</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Test with mocked clipboard</span></span>
<span class="line"><span style="color:#A6E22E">describe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Copy Button'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	let</span><span style="color:#F8F8F2"> originalWriteText</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	let</span><span style="color:#F8F8F2"> mockClipboard</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	beforeEach</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// Store original and create mock</span></span>
<span class="line"><span style="color:#F8F8F2">		originalWriteText </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> navigator.clipboard?.writeText</span></span>
<span class="line"><span style="color:#F8F8F2">		mockClipboard </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">			lastWrittenText: </span><span style="color:#AE81FF">null</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			shouldFail: </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Mock the writeText method</span></span>
<span class="line"><span style="color:#F92672">		if</span><span style="color:#F8F8F2"> (navigator.clipboard) {</span></span>
<span class="line"><span style="color:#F8F8F2">			navigator.clipboard.</span><span style="color:#A6E22E">writeText</span><span style="color:#F92672"> =</span><span style="color:#F92672"> async</span><span style="color:#FD971F;font-style:italic"> text</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				if</span><span style="color:#F8F8F2"> (mockClipboard.shouldFail) {</span></span>
<span class="line"><span style="color:#F92672">					throw</span><span style="color:#F92672"> new</span><span style="color:#A6E22E"> Error</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Clipboard write failed'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">				mockClipboard.lastWrittenText </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> text</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#66D9EF;font-style:italic"> Promise</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">resolve</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">			}</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	afterEach</span><span style="color:#F8F8F2">(() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// Restore original</span></span>
<span class="line"><span style="color:#F92672">		if</span><span style="color:#F8F8F2"> (navigator.clipboard </span><span style="color:#F92672">&#x26;&#x26;</span><span style="color:#F8F8F2"> originalWriteText) {</span></span>
<span class="line"><span style="color:#F8F8F2">			navigator.clipboard.writeText </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> originalWriteText</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">	it</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copies text to clipboard'</span><span style="color:#F8F8F2">, </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">		document.body.innerHTML </span><span style="color:#F92672">=</span></span>
<span class="line"><span style="color:#E6DB74">			'&#x3C;copy-button text="Hello World">&#x3C;button>Copy&#x3C;/button>&#x3C;/copy-button>'</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> button </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copy-button button'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		let</span><span style="color:#F8F8F2"> copied </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> false</span></span>
<span class="line"><span style="color:#F8F8F2">		document.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copy-button'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copied'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">			copied </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> true</span></span>
<span class="line"><span style="color:#F8F8F2">		})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">		button.</span><span style="color:#A6E22E">click</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">		await</span><span style="color:#A6E22E"> animationFrame</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(mockClipboard.lastWrittenText).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Hello World'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#A6E22E">		expect</span><span style="color:#F8F8F2">(copied).</span><span style="color:#A6E22E">toBe</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	})</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>
</section>

<section>


	            <h2 id="performance-optimization">
	                <a name="performance-optimization" class="anchor" href="#performance-optimization">
		                <span class="permalink">🔗</span>
	                </a>
	                Performance Optimization
	            </h2>
	            <h3 id="efficient-list-rendering">
	                <a name="efficient-list-rendering" class="anchor" href="#efficient-list-rendering">
		                <span class="permalink">🔗</span>
	                </a>
	                Efficient List Rendering
	            </h3><p>Handle large lists with virtual scrolling and efficient updates:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'virtual-list'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		items: </span><span style="color:#A6E22E">asJSON</span><span style="color:#F8F8F2">([]),</span></span>
<span class="line"><span style="color:#F8F8F2">		itemHeight: </span><span style="color:#A6E22E">asInteger</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">50</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		visibleCount: </span><span style="color:#A6E22E">asInteger</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> scrollTop </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> signal</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#A6E22E"> visibleItems</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">			const</span><span style="color:#F8F8F2"> start </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#A6E22E">floor</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E">scrollTop</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> el.itemHeight)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">			const</span><span style="color:#F8F8F2"> end </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#A6E22E">min</span><span style="color:#F8F8F2">(start </span><span style="color:#F92672">+</span><span style="color:#F8F8F2"> el.visibleCount, el.items.length)</span></span>
<span class="line"><span style="color:#F92672">			return</span><span style="color:#F8F8F2"> el.items.</span><span style="color:#A6E22E">slice</span><span style="color:#F8F8F2">(start, end).</span><span style="color:#A6E22E">map</span><span style="color:#F8F8F2">((</span><span style="color:#FD971F;font-style:italic">item</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">index</span><span style="color:#F8F8F2">) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F92672">				...</span><span style="color:#F8F8F2">item,</span></span>
<span class="line"><span style="color:#F8F8F2">				index: start </span><span style="color:#F92672">+</span><span style="color:#F8F8F2"> index,</span></span>
<span class="line"><span style="color:#F8F8F2">			}))</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.container'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">					'height'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">					() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#E6DB74"> `</span><span style="color:#F92672">${</span><span style="color:#F8F8F2">el.visibleCount </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> el.itemHeight</span><span style="color:#F92672">}</span><span style="color:#E6DB74">px`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'scroll'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					scrollTop.</span><span style="color:#A6E22E">set</span><span style="color:#F8F8F2">(e.target.scrollTop)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.content'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">					'height'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">					() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#E6DB74"> `</span><span style="color:#F92672">${</span><span style="color:#F8F8F2">el.items.length </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> el.itemHeight</span><span style="color:#F92672">}</span><span style="color:#E6DB74">px`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">					'paddingTop'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">					() </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#E6DB74">						`</span><span style="color:#F92672">${</span><span style="color:#F8F8F2">Math.</span><span style="color:#A6E22E">floor</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E">scrollTop</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> el.itemHeight) </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> el.itemHeight</span><span style="color:#F92672">}</span><span style="color:#E6DB74">px`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">				() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">					const</span><span style="color:#F8F8F2"> content </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.content'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">					const</span><span style="color:#A6E22E"> update</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">						// Only render visible items</span></span>
<span class="line"><span style="color:#F8F8F2">						content.innerHTML </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> visibleItems</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">							.</span><span style="color:#A6E22E">map</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic">								item</span><span style="color:#66D9EF;font-style:italic"> =></span></span>
<span class="line"><span style="color:#E6DB74">									`&#x3C;div class="item" style="height: </span><span style="color:#F92672">${</span><span style="color:#F8F8F2">el.itemHeight</span><span style="color:#F92672">}</span><span style="color:#E6DB74">px"></span><span style="color:#F92672">${</span><span style="color:#F8F8F2">item.text</span><span style="color:#F92672">}</span><span style="color:#E6DB74">&#x3C;/div>`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">							)</span></span>
<span class="line"><span style="color:#F8F8F2">							.</span><span style="color:#A6E22E">join</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">					}</span></span>
<span class="line"><span style="color:#A6E22E">					update</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">					return</span><span style="color:#F8F8F2"> update</span></span>
<span class="line"><span style="color:#F8F8F2">				},</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="debounced-updates">
	                <a name="debounced-updates" class="anchor" href="#debounced-updates">
		                <span class="permalink">🔗</span>
	                </a>
	                Debounced Updates
	            </h3><p>Optimize expensive operations with debouncing:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'search-input'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		query: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		results: </span><span style="color:#A6E22E">asJSON</span><span style="color:#F8F8F2">([]),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		let</span><span style="color:#F8F8F2"> searchTimeout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#A6E22E"> debouncedSearch</span><span style="color:#F92672"> =</span><span style="color:#FD971F;font-style:italic"> query</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">			clearTimeout</span><span style="color:#F8F8F2">(searchTimeout)</span></span>
<span class="line"><span style="color:#F8F8F2">			searchTimeout </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> setTimeout</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				if</span><span style="color:#F8F8F2"> (query.</span><span style="color:#A6E22E">trim</span><span style="color:#F8F8F2">()) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">					const</span><span style="color:#F8F8F2"> response </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#A6E22E"> fetch</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">						`/api/search?q=</span><span style="color:#F92672">${</span><span style="color:#A6E22E">encodeURIComponent</span><span style="color:#F8F8F2">(query)</span><span style="color:#F92672">}</span><span style="color:#E6DB74">`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"><span style="color:#F8F8F2">					el.results </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#F8F8F2"> response.</span><span style="color:#A6E22E">json</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">				} </span><span style="color:#F92672">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.results </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> []</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">			}, </span><span style="color:#AE81FF">300</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'input'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setProperty</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'value'</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">'query'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'input'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.query </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> e.target.value</span></span>
<span class="line"><span style="color:#A6E22E">					debouncedSearch</span><span style="color:#F8F8F2">(el.query)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.results'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#F8F8F2"> results </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.results'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#A6E22E"> update</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					results.innerHTML </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> el.results</span></span>
<span class="line"><span style="color:#F8F8F2">						.</span><span style="color:#A6E22E">map</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic">							result</span><span style="color:#66D9EF;font-style:italic"> =></span></span>
<span class="line"><span style="color:#E6DB74">								`&#x3C;div class="result"></span><span style="color:#F92672">${</span><span style="color:#F8F8F2">result.title</span><span style="color:#F92672">}</span><span style="color:#E6DB74">&#x3C;/div>`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">						)</span></span>
<span class="line"><span style="color:#F8F8F2">						.</span><span style="color:#A6E22E">join</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#A6E22E">				update</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> update</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>
</section>

<section>


	            <h2 id="error-handling-amp-debugging">
	                <a name="error-handling-amp-debugging" class="anchor" href="#error-handling-amp-debugging">
		                <span class="permalink">🔗</span>
	                </a>
	                Error Handling &amp; Debugging
	            </h2>
	            <h3 id="graceful-error-boundaries">
	                <a name="graceful-error-boundaries" class="anchor" href="#graceful-error-boundaries">
		                <span class="permalink">🔗</span>
	                </a>
	                Graceful Error Boundaries
	            </h3><p>Implement error handling patterns that don&#39;t break the entire application:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'error-boundary'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		hasError: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		errorMessage: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">		// Global error handler</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#A6E22E"> handleError</span><span style="color:#F92672"> =</span><span style="color:#FD971F;font-style:italic"> error</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">			console.</span><span style="color:#A6E22E">error</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Component error:'</span><span style="color:#F8F8F2">, error)</span></span>
<span class="line"><span style="color:#F8F8F2">			el.hasError </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> true</span></span>
<span class="line"><span style="color:#F8F8F2">			el.errorMessage </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> error.message </span><span style="color:#F92672">||</span><span style="color:#E6DB74"> 'An unexpected error occurred'</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Catch errors in child components</span></span>
<span class="line"><span style="color:#F8F8F2">		window.</span><span style="color:#A6E22E">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'error'</span><span style="color:#F8F8F2">, handleError)</span></span>
<span class="line"><span style="color:#F8F8F2">		window.</span><span style="color:#A6E22E">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'unhandledrejection'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">e</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">			handleError</span><span style="color:#F8F8F2">(e.reason)</span></span>
<span class="line"><span style="color:#F8F8F2">		})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.error-display'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> (el.hasError </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#A6E22E">				setText</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'errorMessage'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.content'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> (el.hasError </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.retry-button'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span></span>
<span class="line"><span style="color:#F8F8F2">					el.hasError </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'inline-block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">				),</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					el.hasError </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> false</span></span>
<span class="line"><span style="color:#F8F8F2">					el.errorMessage </span><span style="color:#F92672">=</span><span style="color:#E6DB74"> ''</span></span>
<span class="line"><span style="color:#88846F">					// Trigger re-render of child components</span></span>
<span class="line"><span style="color:#F8F8F2">					location.</span><span style="color:#A6E22E">reload</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">			// Cleanup</span></span>
<span class="line"><span style="color:#F8F8F2">			() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					window.</span><span style="color:#A6E22E">removeEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'error'</span><span style="color:#F8F8F2">, handleError)</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">			},</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="development-vs-production-patterns">
	                <a name="development-vs-production-patterns" class="anchor" href="#development-vs-production-patterns">
		                <span class="permalink">🔗</span>
	                </a>
	                Development vs Production Patterns
	            </h3><p>Create components that behave differently in development:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'dev-tools'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		enabled: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> isDev </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> process.env.NODE_ENV </span><span style="color:#F92672">===</span><span style="color:#E6DB74"> 'development'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">!</span><span style="color:#F8F8F2">isDev) {</span></span>
<span class="line"><span style="color:#88846F">			// Hide in production</span></span>
<span class="line"><span style="color:#F8F8F2">			el.style.display </span><span style="color:#F92672">=</span><span style="color:#E6DB74"> 'none'</span></span>
<span class="line"><span style="color:#F92672">			return</span><span style="color:#F8F8F2"> []</span></span>
<span class="line"><span style="color:#F8F8F2">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.component-inspector'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">					// Show component state in console</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">					const</span><span style="color:#F8F8F2"> components </span><span style="color:#F92672">=</span></span>
<span class="line"><span style="color:#F8F8F2">						document.</span><span style="color:#A6E22E">querySelectorAll</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'[data-component]'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">					components.</span><span style="color:#A6E22E">forEach</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">comp</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">						console.</span><span style="color:#A6E22E">log</span><span style="color:#F8F8F2">(comp.tagName, comp)</span></span>
<span class="line"><span style="color:#F8F8F2">					})</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">				'.state-logger'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">				on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">					// Log all component states</span></span>
<span class="line"><span style="color:#F8F8F2">					console.</span><span style="color:#A6E22E">table</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">						Array.</span><span style="color:#A6E22E">from</span><span style="color:#F8F8F2">(document.</span><span style="color:#A6E22E">querySelectorAll</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'*'</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">							.</span><span style="color:#A6E22E">filter</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> el.constructor.name </span><span style="color:#F92672">!==</span><span style="color:#E6DB74"> 'HTMLElement'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">							.</span><span style="color:#A6E22E">map</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">comp</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">								tag: comp.tagName.</span><span style="color:#A6E22E">toLowerCase</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">								state: Object.</span><span style="color:#A6E22E">keys</span><span style="color:#F8F8F2">(comp).</span><span style="color:#A6E22E">reduce</span><span style="color:#F8F8F2">((</span><span style="color:#FD971F;font-style:italic">acc</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">key</span><span style="color:#F8F8F2">) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">									if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">typeof</span><span style="color:#F8F8F2"> comp[key] </span><span style="color:#F92672">!==</span><span style="color:#E6DB74"> 'function'</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">										acc[key] </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> comp[key]</span></span>
<span class="line"><span style="color:#F8F8F2">									}</span></span>
<span class="line"><span style="color:#F92672">									return</span><span style="color:#F8F8F2"> acc</span></span>
<span class="line"><span style="color:#F8F8F2">								}, {}),</span></span>
<span class="line"><span style="color:#F8F8F2">							})),</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"><span style="color:#F8F8F2">				}),</span></span>
<span class="line"><span style="color:#F8F8F2">			),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>
</section>

<section>


	            <h2 id="integration-patterns">
	                <a name="integration-patterns" class="anchor" href="#integration-patterns">
		                <span class="permalink">🔗</span>
	                </a>
	                Integration Patterns
	            </h2>
	            <h3 id="working-with-css-frameworks">
	                <a name="working-with-css-frameworks" class="anchor" href="#working-with-css-frameworks">
		                <span class="permalink">🔗</span>
	                </a>
	                Working with CSS Frameworks
	            </h3><p>Integrate UIElement components with popular CSS frameworks:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// Bootstrap integration</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'bootstrap-modal'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		visible: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">		title: </span><span style="color:#A6E22E">asString</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		let</span><span style="color:#F8F8F2"> bootstrapModal</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#88846F">			// Initialize Bootstrap modal</span></span>
<span class="line"><span style="color:#F8F8F2">			() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">				if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">typeof</span><span style="color:#F8F8F2"> bootstrap </span><span style="color:#F92672">!==</span><span style="color:#E6DB74"> 'undefined'</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">					bootstrapModal </span><span style="color:#F92672">=</span><span style="color:#F92672"> new</span><span style="color:#F8F8F2"> bootstrap.</span><span style="color:#A6E22E">Modal</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">						el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.modal'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">					// Sync UIElement state with Bootstrap events</span></span>
<span class="line"><span style="color:#F8F8F2">					el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.modal'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">addEventListener</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">						'shown.bs.modal'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">						() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">							el.visible </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> true</span></span>
<span class="line"><span style="color:#F8F8F2">						},</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">					el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.modal'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">addEventListener</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">						'hidden.bs.modal'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">						() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">							el.visible </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> false</span></span>
<span class="line"><span style="color:#F8F8F2">						},</span></span>
<span class="line"><span style="color:#F8F8F2">					)</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					bootstrapModal?.</span><span style="color:#A6E22E">dispose</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#F8F8F2">			},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">			// Sync visibility</span></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.modal'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#A6E22E"> update</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">					if</span><span style="color:#F8F8F2"> (bootstrapModal) {</span></span>
<span class="line"><span style="color:#F92672">						if</span><span style="color:#F8F8F2"> (el.visible) {</span></span>
<span class="line"><span style="color:#F8F8F2">							bootstrapModal.</span><span style="color:#A6E22E">show</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">						} </span><span style="color:#F92672">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">							bootstrapModal.</span><span style="color:#A6E22E">hide</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">						}</span></span>
<span class="line"><span style="color:#F8F8F2">					}</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#A6E22E">				update</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> update</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.modal-title'</span><span style="color:#F8F8F2">, </span><span style="color:#A6E22E">setText</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'title'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#F8F8F2">		]</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Tailwind CSS integration</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'tailwind-toggle'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#F8F8F2">		active: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'button'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#88846F">			// Dynamic Tailwind classes</span></span>
<span class="line"><span style="color:#F8F8F2">			() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#F8F8F2"> button </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> el.</span><span style="color:#A6E22E">querySelector</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'button'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">				const</span><span style="color:#A6E22E"> update</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">					button.className </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> el.active</span></span>
<span class="line"><span style="color:#F92672">						?</span><span style="color:#E6DB74"> 'bg-blue-500 text-white px-4 py-2 rounded'</span></span>
<span class="line"><span style="color:#F92672">						:</span><span style="color:#E6DB74"> 'bg-gray-200 text-gray-800 px-4 py-2 rounded'</span></span>
<span class="line"><span style="color:#F8F8F2">				}</span></span>
<span class="line"><span style="color:#A6E22E">				update</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F92672">				return</span><span style="color:#F8F8F2"> update</span></span>
<span class="line"><span style="color:#F8F8F2">			},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">			on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">				el.active </span><span style="color:#F92672">=</span><span style="color:#F92672"> !</span><span style="color:#F8F8F2">el.active</span></span>
<span class="line"><span style="color:#F8F8F2">			}),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>

	            <h3 id="server-side-rendering-ssr">
	                <a name="server-side-rendering-ssr" class="anchor" href="#server-side-rendering-ssr">
		                <span class="permalink">🔗</span>
	                </a>
	                Server-Side Rendering (SSR)
	            </h3><p>Design components that work well with SSR:</p>
<code-block collapsed language="js" copy-success="Copied!" copy-error="Error trying to copy to clipboard!">
	<p class="meta">
		
		<span class="language">js</span>
	</p>
	<pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2" tabindex="0"><code><span class="line"><span style="color:#88846F">// SSR-friendly component</span></span>
<span class="line"><span style="color:#A6E22E">component</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">	'ssr-component'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{</span></span>
<span class="line"><span style="color:#88846F">		// Use RESET to preserve server-rendered content</span></span>
<span class="line"><span style="color:#F8F8F2">		initialData: RESET,</span></span>
<span class="line"><span style="color:#F8F8F2">		isClient: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	},</span></span>
<span class="line"><span style="color:#F8F8F2">	(</span><span style="color:#FD971F;font-style:italic">el</span><span style="color:#F8F8F2">, { </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#88846F">		// Detect client-side hydration</span></span>
<span class="line"><span style="color:#F8F8F2">		() </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">			// This runs only on the client</span></span>
<span class="line"><span style="color:#F8F8F2">			el.isClient </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">			// Progressive enhancement</span></span>
<span class="line"><span style="color:#F92672">			if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">typeof</span><span style="color:#F8F8F2"> window </span><span style="color:#F92672">!==</span><span style="color:#E6DB74"> 'undefined'</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#88846F">				// Client-only features</span></span>
<span class="line"><span style="color:#F8F8F2">				el.</span><span style="color:#A6E22E">setupClientFeatures</span><span style="color:#F8F8F2">?.()</span></span>
<span class="line"><span style="color:#F8F8F2">			}</span></span>
<span class="line"><span style="color:#F8F8F2">		},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'.content'</span><span style="color:#F8F8F2">, </span><span style="color:#A6E22E">setText</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'initialData'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">		// Show client-only features</span></span>
<span class="line"><span style="color:#A6E22E">		first</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E6DB74">			'.interactive-features'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#A6E22E">			setStyle</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'display'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> (el.isClient </span><span style="color:#F92672">?</span><span style="color:#E6DB74"> 'block'</span><span style="color:#F92672"> :</span><span style="color:#E6DB74"> 'none'</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#F8F8F2">		),</span></span>
<span class="line"><span style="color:#F8F8F2">	],</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
	<input-button class="copy">
		<button type="button" class="secondary small">
			<span class="label">Copy</span>
		</button>
	</input-button>
	<button type="button" class="overlay">Expand</button>
</code-block>
</section>

<section>


	            <h2 id="best-practices-summary">
	                <a name="best-practices-summary" class="anchor" href="#best-practices-summary">
		                <span class="permalink">🔗</span>
	                </a>
	                Best Practices Summary
	            </h2>
	            <h3 id="component-design">
	                <a name="component-design" class="anchor" href="#component-design">
		                <span class="permalink">🔗</span>
	                </a>
	                Component Design
	            </h3><ul>
<li><strong>Single Responsibility</strong>: Each component should have one clear purpose</li>
<li><strong>Composition over Configuration</strong>: Build complex UIs by combining simple components</li>
<li><strong>Progressive Enhancement</strong>: Start with working HTML, enhance with JavaScript</li>
<li><strong>Accessibility First</strong>: Design for screen readers and keyboard navigation</li>
</ul>

	            <h3 id="state-management">
	                <a name="state-management" class="anchor" href="#state-management">
		                <span class="permalink">🔗</span>
	                </a>
	                State Management
	            </h3><ul>
<li><strong>Use appropriate initialization</strong>: Direct values, parsers, or RESET based on data source</li>
<li><strong>Keep state minimal</strong>: Only store what the component actually needs</li>
<li><strong>Prefer derived state</strong>: Calculate values from existing state when possible</li>
<li><strong>Handle edge cases</strong>: Validate inputs and provide fallbacks</li>
</ul>

	            <h3 id="performance">
	                <a name="performance" class="anchor" href="#performance">
		                <span class="permalink">🔗</span>
	                </a>
	                Performance
	            </h3><ul>
<li><strong>Batch updates</strong>: Take advantage of UIElement&#39;s scheduled effect system</li>
<li><strong>Debounce expensive operations</strong>: Network requests, complex calculations</li>
<li><strong>Virtual scrolling</strong>: For large lists and data sets</li>
<li><strong>Lazy loading</strong>: Load components and data only when needed</li>
</ul>

	            <h3 id="testing">
	                <a name="testing" class="anchor" href="#testing">
		                <span class="permalink">🔗</span>
	                </a>
	                Testing
	            </h3><ul>
<li><strong>Account for timing</strong>: Use <code>requestAnimationFrame</code> for effect scheduling</li>
<li><strong>Isolate tests</strong>: Reset component state between tests</li>
<li><strong>Mock browser APIs</strong>: Test components that use navigator, fetch, etc.</li>
<li><strong>Test real behavior</strong>: Focus on user interactions and outcomes</li>
</ul>

	            <h3 id="debugging">
	                <a name="debugging" class="anchor" href="#debugging">
		                <span class="permalink">🔗</span>
	                </a>
	                Debugging
	            </h3><ul>
<li><strong>Use development tools</strong>: Build debug-friendly components</li>
<li><strong>Error boundaries</strong>: Handle errors gracefully</li>
<li><strong>Logging</strong>: Provide meaningful error messages and state information</li>
<li><strong>Browser dev tools</strong>: Leverage browser debugging capabilities</li>
</ul>
</section>

<section>


	            <h2 id="next-steps">
	                <a name="next-steps" class="anchor" href="#next-steps">
		                <span class="permalink">🔗</span>
	                </a>
	                Next Steps
	            </h2><p>With these patterns and techniques, you&#39;re equipped to build production-ready UIElement applications:</p>
<ul>
<li><strong><a href="examples-recipes.html">Examples &amp; Recipes</a></strong> - See these patterns applied in real components</li>
<li><strong><a href="styling-components.html">Styling Components</a></strong> - Professional styling approaches</li>
<li><strong><a href="component-communication.html">Component Communication</a></strong> - Advanced component coordination</li>
</ul>
</section>
</main>
			<footer class="content-grid">
				<div class="content">
					<h2 class="visually-hidden">Footer</h2>
					<p>© 2024 – 2025 Zeix AG</p>
				</div>
			</footer>
		</client-router>
	</body>
</html>
